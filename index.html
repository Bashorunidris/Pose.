<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pose - African Creator Platform</title>
    <style>
        /* ====== CSS Variables for Theme ====== */
        :root {
            --primary: #4C1D95;
            --primary-light: #6D28D9;
            --primary-dark: #3B0764;
            --bg-main: #f7f8fb;
            --bg-card: #ffffff;
            --text-primary: #111;
            --text-secondary: #666;
            --text-muted: #999;
            --border: #e5e7eb;
            --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.05);
            --shadow-md: 0 4px 6px rgba(0, 0, 0, 0.07);
            --shadow-lg: 0 10px 25px rgba(0, 0, 0, 0.1);
            --radius-sm: 8px;
            --radius-md: 12px;
            --radius-lg: 16px;
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* ====== Reset & Base ====== */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0
        }

        html {
            scroll-behavior: smooth
        }

        html,
        body {
            height: 100%;
            overflow-x: hidden
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            line-height: 1.6;
            color: var(--text-primary);
            background: var(--bg-main);
            -webkit-font-smoothing: antialiased;
        }

        a {
            color: inherit;
            text-decoration: none;
            transition: var(--transition)
        }

        button {
            font-family: inherit;
            cursor: pointer;
            transition: var(--transition)
        }

        img {
            max-width: 100%;
            display: block
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 24px
        }

        /* Modal Styles */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.8);
            z-index: 2000;
            align-items: center;
            justify-content: center;
        }

        .modal-overlay.active {
            display: flex;
        }

        .modal {
            background: #1a1a1a;
            border-radius: var(--radius-md);
            padding: 30px;
            width: 90%;
            max-width: 400px;
            color: white;
            position: relative;
            box-shadow: var(--shadow-lg);
        }

        .modal-close {
            position: absolute;
            top: 15px;
            right: 15px;
            background: none;
            border: none;
            color: white;
            font-size: 24px;
            cursor: pointer;
        }

        .modal h2 {
            margin: 0 0 20px 0;
            font-size: 24px;
        }

        .modal input {
            width: 100%;
            padding: 12px;
            margin-bottom: 15px;
            background: #2a2a2a;
            border: 1px solid var(--border);
            border-radius: var(--radius-sm);
            color: white;
            font-size: 14px;
            transition: var(--transition);
        }

        .modal input:focus {
            outline: none;
            border-color: var(--primary);
        }

        .modal-btn {
            width: 100%;
            padding: 12px;
            background: linear-gradient(45deg, var(--primary), var(--primary-light));
            border: none;
            border-radius: var(--radius-sm);
            color: white;
            font-weight: bold;
            cursor: pointer;
            font-size: 16px;
            margin-top: 10px;
            transition: var(--transition);
        }

        .modal-btn:hover {
            opacity: 0.9;
        }

        .modal-switch {
            text-align: center;
            margin-top: 15px;
            font-size: 14px;
            color: #aaa;
        }

        .modal-switch a {
            color: var(--primary);
            cursor: pointer;
            text-decoration: none;
        }

        .error-msg {
            background: var(--primary);
            padding: 10px;
            border-radius: var(--radius-sm);
            margin-bottom: 15px;
            font-size: 14px;
            box-shadow: var(--shadow-sm);
        }

        /* ====== UPLOAD PROGRESS CONTAINER ====== */
        .upload-progress-container {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 350px;
            background: #1a1a1a;
            border: 1px solid #4C1D95;
            border-radius: 12px;
            padding: 0;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
            z-index: 2500;
            display: none;
            flex-direction: column;
            max-height: 500px;
        }

        .upload-progress-container.active {
            display: flex;
        }

        .upload-progress-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            background: linear-gradient(135deg, #4C1D95, #6D28D9);
            border-radius: 12px 12px 0 0;
            cursor: pointer;
            user-select: none;
        }

        .upload-progress-header h3 {
            font-size: 14px;
            margin: 0;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .upload-toggle-btn {
            background: none;
            border: none;
            color: white;
            font-size: 18px;
            cursor: pointer;
            padding: 0;
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: transform 0.3s;
        }

        .upload-progress-container.collapsed .upload-toggle-btn {
            transform: rotate(180deg);
        }

        .upload-progress-body {
            padding: 15px;
            flex: 1;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 12px;
            max-height: 400px;
        }

        .upload-progress-container.collapsed .upload-progress-body {
            display: none;
        }

        /* Step Item */
        .upload-step {
            display: flex;
            gap: 10px;
            align-items: flex-start;
        }

        .step-icon {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: bold;
            flex-shrink: 0;
            margin-top: 2px;
        }

        .step-icon.pending {
            background: #333;
            color: #888;
        }

        .step-icon.active {
            background: #4C1D95;
            color: white;
            animation: pulse 1s infinite;
        }

        .step-icon.completed {
            background: #22c55e;
            color: white;
        }

        @keyframes pulse {

            0%,
            100% {
                opacity: 1;
            }

            50% {
                opacity: 0.5;
            }
        }

        .step-content {
            flex: 1;
        }

        .step-label {
            font-size: 13px;
            font-weight: 600;
            color: white;
            margin-bottom: 4px;
        }

        .step-progress {
            font-size: 11px;
            color: #888;
            margin-bottom: 4px;
        }

        .step-bar {
            width: 100%;
            height: 4px;
            background: #222;
            border-radius: 2px;
            overflow: hidden;
            display: none;
        }

        .step-bar.active {
            display: block;
        }

        .step-bar-fill {
            height: 100%;
            background: linear-gradient(90deg, #4C1D95, #6D28D9);
            width: 0%;
            transition: width 0.3s;
        }

        /* Overall Progress */
        .overall-progress {
            border-top: 1px solid #333;
            padding-top: 12px;
            margin-top: 8px;
        }

        .overall-bar {
            width: 100%;
            height: 6px;
            background: #222;
            border-radius: 3px;
            overflow: hidden;
            margin-bottom: 6px;
        }

        .overall-bar-fill {
            height: 100%;
            background: linear-gradient(90deg, #4C1D95, #22c55e);
            width: 0%;
            transition: width 0.3s;
        }

        .overall-stats {
            display: flex;
            justify-content: space-between;
            font-size: 11px;
            color: #888;
        }

        /* Profile Page Styles */
        .profile-page {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: #000;
            z-index: 1500;
            overflow-y: auto;
        }

        .profile-page.active {
            display: block;
        }

        .profile-header {
            position: relative;
            height: 200px;
            background: linear-gradient(135deg, var(--primary-light) 0%, var(--primary-dark) 100%);
        }

        .profile-back-btn {
            position: absolute;
            top: 15px;
            left: 15px;
            background: rgba(0, 0, 0, 0.5);
            border: none;
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 20px;
        }

        .profile-settings-btn {
            position: absolute;
            top: 15px;
            right: 15px;
            background: rgba(0, 0, 0, 0.5);
            border: none;
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 20px;
        }

        .profile-info-section {
            position: relative;
            margin-top: -50px;
            padding: 0 20px;
        }

        .profile-pic-large {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            border: 4px solid #000;
            background: #333;
            margin: 0 auto;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 36px;
            color: white;
            font-weight: bold;
        }

        .profile-name {
            text-align: center;
            color: white;
            font-size: 24px;
            font-weight: bold;
            margin-top: 15px;
        }

        .profile-username {
            text-align: center;
            color: #888;
            font-size: 16px;
            margin-top: 5px;
        }

        .profile-bio {
            text-align: center;
            color: #aaa;
            font-size: 14px;
            margin-top: 15px;
            line-height: 1.4;
        }

        .profile-stats {
            display: flex;
            justify-content: space-around;
            margin-top: 20px;
            padding: 20px 0;
            border-top: 1px solid #222;
            border-bottom: 1px solid #222;
        }

        .stat {
            text-align: center;
            color: white;
        }

        .stat-value {
            font-size: 20px;
            font-weight: bold;
        }

        .stat-label {
            font-size: 12px;
            color: #888;
            margin-top: 5px;
        }

        .profile-tabs {
            display: flex;
            justify-content: space-around;
            padding: 15px 0;
            background: #111;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .profile-tab {
            color: #888;
            font-size: 14px;
            cursor: pointer;
            padding: 8px 12px;
            border-radius: var(--radius-sm);
        }

        .profile-tab.active {
            color: white;
            background: #222;
        }

        .profile-content {
            padding: 20px;
            min-height: 400px;
        }

        .video-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 2px;
        }

        .video-item {
            aspect-ratio: 9/16;
            background: #222;
            position: relative;
            cursor: pointer;
        }

        .video-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .video-stats {
            position: absolute;
            bottom: 5px;
            left: 5px;
            right: 5px;
            color: white;
            font-size: 11px;
            display: flex;
            gap: 8px;
        }

        .post-section {
            background: #111;
            border-radius: var(--radius-md);
            padding: 20px;
            margin-bottom: 20px;
        }

        .post-input {
            width: 100%;
            min-height: 100px;
            background: #222;
            border: 1px solid #333;
            border-radius: var(--radius-sm);
            color: white;
            padding: 12px;
            font-size: 14px;
            resize: vertical;
        }

        .post-actions {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }

        .post-btn {
            flex: 1;
            padding: 10px;
            background: var(--primary);
            border: none;
            border-radius: var(--radius-sm);
            color: white;
            font-weight: bold;
            cursor: pointer;
            transition: var(--transition);
        }

        .post-btn:hover {
            background: var(--primary-light);
        }

        .feed-post {
            background: #111;
            border-radius: var(--radius-md);
            padding: 15px;
            margin-bottom: 15px;
        }

        .post-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
        }

        .post-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: #333;
        }

        .post-author {
            color: white;
            font-weight: bold;
            font-size: 14px;
        }

        .post-text {
            color: #ddd;
            font-size: 14px;
            line-height: 1.4;
            margin-bottom: 10px;
        }

        .post-stats {
            display: flex;
            gap: 20px;
            color: #888;
            font-size: 13px;
        }

        /* Original Feed Styles */
        .video-feed {
            height: 100%;
            width: 100%;
            overflow-y: scroll;
            scroll-snap-type: y mandatory;
        }

        .video-post {
            position: relative;
            height: 100vh;
            width: 100%;
            scroll-snap-align: start;
            overflow: hidden;
            background: #111;
            cursor: pointer;
        }

        .video-post video {
            height: 100%;
            width: 100%;
            object-fit: cover;
        }

        .play-pause-overlay {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 0, 0.7);
            border-radius: 50%;
            width: 80px;
            height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transition: opacity 0.3s ease;
            pointer-events: none;
            z-index: 100;
        }

        .play-pause-overlay.show {
            opacity: 1;
        }

        .play-pause-overlay svg {
            width: 40px;
            height: 40px;
            fill: white;
        }

        .overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            color: white;
        }

        .navbar {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 15px 20px;
            background: #0a0a0a;
            position: sticky;
            top: 0;
            z-index: 1000;
            border-bottom: 1px solid #222;
        }

        .profile-icon {
            position: absolute;
            left: 20px;
            font-size: 22px;
            background: rgba(76, 29, 149, 0.8);
            border-radius: 50%;
            padding: 8px;
            cursor: pointer;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition);
            border: 2px solid var(--primary-light);
            flex-shrink: 0;
        }

        .profile-icon:hover {
            background: rgba(76, 29, 149, 1);
            transform: scale(1.1);
        }

        .profile-icon img {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            object-fit: cover;
        }

        .tabs {
            display: flex;
            gap: 15px;
            font-size: 18px;
            font-weight: 500;
        }

        .tabs span {
            cursor: pointer;
            position: relative;
            color: white;
        }

        .tabs .active::after {
            content: "";
            position: absolute;
            bottom: -5px;
            left: 0;
            right: 0;
            margin: auto;
            width: 60%;
            height: 2px;
            background: white;
        }

        .search-icon {
            position: absolute;
            right: 20px;
            background: white;
            border-radius: 50%;
            padding: 8px;
            font-size: 18px;
            color: black;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
        }

        .sidebar {
            position: absolute;
            right: 10px;
            top: 30%;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
            font-size: 14px;
        }

        .sidebar div {
            text-align: center;
        }

        .sidebar i {
            font-size: 26px;
            display: block;
            margin-bottom: 5px;
        }

        .profile-section {
            position: absolute;
            bottom: 280px;
            left: 10px;
            display: flex;
            align-items: center;
            gap: 12px;
            right: 80px;
            transition: bottom 0.3s ease;
        }

        .profile-section.ad-closed {
            bottom: 150px;
        }

        .profile-pic {
            position: relative;
            width: 50px;
            height: 50px;
            flex-shrink: 0;
        }

        .profile-pic img {
            width: 100%;
            height: 100%;
            border-radius: 50%;
        }

        .infinity-badge {
            position: absolute;
            bottom: -5px;
            right: -5px;
            background: black;
            border: 2px solid white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            font-size: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .profile-info {
            display: flex;
            flex-direction: column;
            flex: 1;
            min-width: 0;
        }

        .profile-info .name {
            font-weight: bold;
            font-size: 16px;
            color: white;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.8);
            margin-bottom: 2px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .profile-info .followers {
            font-size: 14px;
            color: rgba(255, 255, 255, 0.8);
            font-weight: 500;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.6);
        }

        .follow-btn {
            background: linear-gradient(45deg, var(--primary), var(--primary-light));
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 13px;
            font-weight: bold;
            color: white;
            cursor: pointer;
            border: none;
            outline: none;
            transition: var(--transition);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            box-shadow: 0 2px 8px rgba(76, 29, 149, 0.3);
            flex-shrink: 0;
        }

        .ad-caption {
            position: absolute;
            bottom: 210px;
            left: 10px;
            font-size: 13px;
            max-width: 280px;
            line-height: 1.4em;
            transition: bottom 0.3s ease;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.8);
        }

        .ad-caption.ad-closed {
            bottom: 80px;
        }

        .banner-ad {
            position: absolute;
            bottom: 100px;
            left: 10px;
            width: 250px;
            height: 130px;
            border-radius: var(--radius-sm);
            overflow: hidden;
            background: var(--bg-card);
            transition: var(--transition);
            box-shadow: var(--shadow-md);
        }

        .banner-ad.hidden {
            opacity: 0;
            transform: translateX(-100%);
            pointer-events: none;
        }

        .banner-ad img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .close-btn {
            position: absolute;
            top: 5px;
            right: 5px;
            background: red;
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            text-align: center;
            line-height: 20px;
            font-size: 14px;
            cursor: pointer;
        }

        .bottom-nav {
            position: fixed;
            bottom: 10px;
            left: 0;
            right: 0;
            display: flex;
            justify-content: space-around;
            align-items: center;
            font-size: 14px;
            z-index: 1000;
            color: white;
        }

        .bottom-nav div {
            display: flex;
            flex-direction: column;
            align-items: center;
            cursor: pointer;
        }

        .bottom-nav i {
            font-size: 24px;
            margin-bottom: 3px;
        }

        /* Edit Profile Styles */
        .edit-profile-btn {
            position: absolute;
            top: 15px;
            right: 60px;
            background: rgba(0, 0, 0, 0.5);
            border: none;
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 14px;
            font-weight: bold;
        }

        .profile-pic-upload {
            position: relative;
            display: inline-block;
        }

        .profile-pic-large {
            background-size: cover;
            background-position: center;
        }

        .upload-overlay {
            position: absolute;
            bottom: 0;
            right: 0;
            background: var(--primary);
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            border: 3px solid #000;
        }

        textarea:focus {
            outline: none;
            border-color: var(--primary);
        }

        /* ========== VIDEO GRID PAGE ========== */
        .video-grid-page {
            background: #000;
            min-height: 100vh;
            padding: 70px 0 90px 0;
        }

        .grid-page-header {
            padding: 20px;
            border-bottom: 1px solid #222;
            background: #0a0a0a;
        }

        .grid-page-header h1 {
            color: white;
            font-size: 24px;
            font-weight: 700;
            margin: 0;
        }

        .video-grid-container {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            padding: 15px;
        }

        .grid-video-card {
            background: #111;
            border-radius: var(--radius-sm);
            overflow: hidden;
            cursor: pointer;
            transition: var(--transition);
            box-shadow: var(--shadow-sm);
        }

        .grid-video-card:hover {
            transform: scale(1.02);
            box-shadow: var(--shadow-md);
        }

        .grid-thumbnail {
            width: 100%;
            aspect-ratio: 9/16;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .play-overlay {
            width: 40px;
            height: 40px;
            background: rgba(0, 0, 0, 0.6);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 14px;
        }

        .grid-video-info {
            padding: 10px;
            background: #0a0a0a;
        }

        .grid-video-title {
            color: white;
            font-size: 13px;
            font-weight: 600;
            margin-bottom: 8px;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        .grid-video-stats {
            display: flex;
            flex-direction: column;
            gap: 4px;
        }

        .grid-video-stats .views,
        .grid-video-stats .earnings {
            color: #888;
            font-size: 11px;
            font-weight: 500;
        }

        .grid-video-stats .earnings {
            color: #4ecdc4;
            font-weight: 600;
        }

        /* ========== TWEET FEED PAGE ========== */
        .tweet-feed-page {
            background: #000;
            min-height: 100vh;
            padding: 70px 0 90px 0;
        }

        .create-post-card {
            background: #0a0a0a;
            border-bottom: 1px solid #222;
            padding: 20px;
            margin-bottom: 10px;
        }

        .create-post-header {
            display: flex;
            gap: 12px;
            margin-bottom: 15px;
        }

        .user-avatar {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary-light) 0%, var(--primary-dark) 100%);
            flex-shrink: 0;
        }

        .create-post-input {
            flex: 1;
            background: transparent;
            border: none;
            color: white;
            font-size: 16px;
            font-family: Arial, sans-serif;
            resize: none;
            min-height: 60px;
            line-height: 1.5;
        }

        .create-post-input:focus {
            outline: none;
        }

        .create-post-input::placeholder {
            color: #555;
        }

        .create-post-actions {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-left: 57px;
        }

        .action-buttons {
            display: flex;
            gap: 10px;
        }

        .action-icon-btn {
            background: transparent;
            border: 1px solid var(--border);
            color: var(--text-muted);
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            cursor: pointer;
            transition: var(--transition);
        }

        .action-icon-btn:hover {
            border-color: var(--text-secondary);
            color: var(--text-secondary);
        }

        .post-submit-btn {
            background: linear-gradient(45deg, var(--primary), var(--primary-light));
            border: none;
            color: white;
            padding: 8px 20px;
            border-radius: 20px;
            font-size: 13px;
            font-weight: bold;
            cursor: pointer;
            transition: var(--transition);
            box-shadow: var(--shadow-sm);
        }

        .post-submit-btn:hover {
            opacity: 0.9;
            box-shadow: var(--shadow-md);
        }

        /* Timeline Posts */
        .feed-timeline {
            padding: 0;
        }

        .timeline-post {
            background: #0a0a0a;
            border-bottom: 1px solid #222;
            padding: 20px;
        }

        .post-user-info {
            display: flex;
            gap: 12px;
            margin-bottom: 12px;
        }

        .user-details {
            flex: 1;
        }

        .user-name {
            color: white;
            font-size: 15px;
            font-weight: 700;
            margin-bottom: 2px;
        }

        .verified {
            color: #1da1f2;
            font-size: 14px;
        }

        .user-handle {
            color: #666;
            font-size: 13px;
        }

        .post-content {
            margin-bottom: 12px;
        }

        .post-text {
            color: #e0e0e0;
            font-size: 15px;
            line-height: 1.5;
            margin: 0 0 12px 0;
        }

        .post-media {
            margin-top: 10px;
        }

        .media-thumbnail {
            width: 100%;
            border-radius: var(--radius-md);
        }

        .post-interactions {
            display: flex;
            gap: 20px;
            padding-top: 12px;
            border-top: 1px solid #1a1a1a;
        }

        .interaction-btn {
            color: #666;
            font-size: 13px;
            cursor: pointer;
            transition: color 0.2s;
        }

        .interaction-btn:hover {
            color: #888;
        }

        .tip-btn {
            color: #4ecdc4;
            font-weight: 600;
        }

        .tip-btn:hover {
            color: #6ee7df;
        }

        /* Load More Section */
        .load-more-section {
            text-align: center;
            padding: 30px 20px;
        }

        .load-more-btn {
            background: #1a1a1a;
            border: 1px solid #333;
            color: white;
            padding: 12px 30px;
            border-radius: 25px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            margin-bottom: 10px;
        }

        .load-more-btn:hover {
            background: #222;
            border-color: #444;
        }

        .load-more-text {
            color: #666;
            font-size: 12px;
            margin: 10px 0 0 0;
        }

        /* Mobile Responsive */
        @media (max-width: 480px) {
            .video-grid-container {
                grid-template-columns: repeat(3, 1fr);
                gap: 8px;
                padding: 10px;
            }

            .grid-video-title {
                font-size: 11px;
            }

            .grid-video-stats {
                font-size: 10px;
            }

            .action-buttons {
                flex-wrap: wrap;
            }

            .action-icon-btn {
                font-size: 11px;
                padding: 5px 10px;
            }
        }

        /* Improve touch scrolling on mobile */
        body {
            overscroll-behavior-y: contain;
        }

        /* Prevent body scroll when tabs are active */
        body.tab-active {
            overflow: hidden;
        }

        /* Tab Content Scrolling */
        .tab-content {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            overflow-y: scroll;
            overflow-x: hidden;
            -webkit-overflow-scrolling: touch;
            z-index: 100;
        }

        .tab-content.active {
            display: block;
        }

        /* Video Grid Page Scrollable */
        .video-grid-page {
            background: #000;
            min-height: 100vh;
            padding: 70px 0 90px 0;
            overflow-y: auto;
        }

        /* Tweet Feed Page Scrollable */
        .tweet-feed-page {
            background: #000;
            min-height: 100vh;
            padding: 70px 0 90px 0;
            overflow-y: auto;
        }

        /* Ensure video feed is also scrollable */
        .video-feed {
            height: 100vh;
            width: 100%;
            overflow-y: scroll;
            scroll-snap-type: y mandatory;
            -webkit-overflow-scrolling: touch;
        }

        /* Hide scrollbar but keep functionality */
        .tab-content::-webkit-scrollbar,
        .video-grid-page::-webkit-scrollbar,
        .tweet-feed-page::-webkit-scrollbar,
        .video-feed::-webkit-scrollbar {
            width: 0px;
            display: none;
        }

        /* For Firefox */
        .tab-content,
        .video-grid-page,
        .tweet-feed-page,
        .video-feed {
            scrollbar-width: none;
        }

        /* Smooth scrolling */
        .tab-content {
            scroll-behavior: smooth;
        }

        /* Make sure content doesn't hide behind fixed elements */
        #poseTab .video-grid-page,
        #friendTab .tweet-feed-page {
            padding-top: 80px;
            padding-bottom: 100px;
        }

        /* Welcome Popup Overlay */
        .welcome-overlay {
            display: flex;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.95);
            backdrop-filter: blur(10px);
            z-index: 3000;
            align-items: center;
            justify-content: center;
            animation: fadeIn 0.3s ease;
        }

        .welcome-overlay.hidden {
            display: none;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }

            to {
                opacity: 1;
            }
        }


        .welcome-modal {
            background: linear-gradient(135deg, #1a1a1a 0%, #0a0a0a 100%);

            border-radius: 20px;
            padding: 40px 30px;
            width: 90%;
            max-width: 450px;
            text-align: center;
            border: 1px solid #333;
            box-shadow: 0 20px 60px rgba(255, 0, 80, 0.3);
            animation: slideUp 0.4s ease;
        }

        @keyframes slideUp {
            from {
                transform: translateY(50px);
                opacity: 0;
            }

            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        /* Logo Section */
        .welcome-logo {
            margin-bottom: 25px;
        }

        .logo-icon {
            margin: 0 auto 15px;
            width: 80px;
            height: 80px;
            background: radial-gradient(circle, rgba(255, 0, 80, 0.2) 0%, transparent 70%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {

            0%,
            100% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.05);
            }
        }

        .logo-text {
            font-size: 42px;
            font-weight: 900;
            background: linear-gradient(45deg, #ff0050, #ff4081, #ff0050);
            background-size: 200% auto;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin: 0;
            letter-spacing: 3px;
            animation: gradientShift 3s ease infinite;
        }

        @keyframes gradientShift {

            0%,
            100% {
                background-position: 0% 50%;
            }

            50% {
                background-position: 100% 50%;
            }
        }

        /* Welcome Message */
        .welcome-message {
            margin-bottom: 30px;
        }

        .welcome-message h2 {
            color: white;
            font-size: 26px;
            font-weight: 700;
            margin: 0 0 15px 0;
        }

        .welcome-message p {
            color: #bbb;
            font-size: 16px;
            line-height: 1.6;
            margin: 0 0 20px 0;
        }

        .welcome-message strong {
            color: #ff4081;
            font-weight: 700;
        }

        /* Features List */
        .features-list {
            display: flex;
            flex-direction: column;
            gap: 10px;
            text-align: left;
            margin-top: 20px;
        }

        .feature-item {
            color: #ddd;
            font-size: 14px;
            padding: 8px 12px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            border-left: 3px solid #ff0050;
        }

        /* Action Buttons */
        .welcome-actions {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-bottom: 20px;
        }

        .welcome-btn {
            width: 100%;
            padding: 15px;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .signup-btn {
            background: linear-gradient(45deg, #ff0050, #ff4081);
            color: white;
            box-shadow: 0 4px 15px rgba(255, 0, 80, 0.4);
        }

        .signup-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(255, 0, 80, 0.6);
        }

        .login-btn {
            background: transparent;
            color: white;
            border: 2px solid #ff0050;
        }

        .login-btn:hover {
            background: rgba(255, 0, 80, 0.1);
            transform: translateY(-2px);
        }

        .skip-btn {
            background: transparent;
            border: none;
            color: #666;
            font-size: 14px;
            cursor: pointer;
            padding: 10px;
            transition: color 0.2s;
        }

        .skip-btn:hover {
            color: #888;
            text-decoration: underline;
        }

        /* Footer */
        .welcome-footer {
            padding-top: 20px;
            border-top: 1px solid #222;
        }

        .welcome-footer p {
            color: #777;
            font-size: 13px;
            margin: 0;
        }

        /* Mobile Responsive */
        @media (max-width: 480px) {
            .welcome-modal {
                padding: 30px 20px;
                width: 95%;
            }

            .logo-text {
                font-size: 36px;
            }

            .welcome-message h2 {
                font-size: 22px;
            }

            .welcome-message p {
                font-size: 15px;
            }

            .feature-item {
                font-size: 13px;
            }

            .welcome-btn {
                padding: 13px;
                font-size: 15px;
            }
        }

        .logo-img {
            width: 80px;
            /* adjust size as needed */
            height: auto;
            border-radius: 12px;
            /* optional rounded corners */
        }


        /* Upload Page Styles */
        .upload-page {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: #0a0a0a;
            z-index: 2000;
            overflow-y: auto;
        }

        .upload-page.active {
            display: block;
        }

        .upload-header {
            position: sticky;
            top: 0;
            background: #1a1a1a;
            padding: 15px 20px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            border-bottom: 1px solid #333;
            z-index: 100;
        }

        .back-btn {
            background: transparent;
            border: none;
            color: white;
            font-size: 24px;
            cursor: pointer;
            padding: 5px 10px;
        }

        .upload-header h1 {
            font-size: 20px;
            font-weight: 700;
            color: white;
        }

        .header-spacer {
            width: 44px;
        }

        .upload-tabs {
            display: flex;
            justify-content: space-around;
            background: #1a1a1a;
            padding: 15px 0;
            border-bottom: 1px solid #333;
            position: sticky;
            top: 61px;
            z-index: 99;
        }

        .upload-tab {
            padding: 10px 20px;
            cursor: pointer;
            color: #888;
            font-weight: 600;
            border-radius: 20px;
            transition: all 0.3s;
        }

        .upload-tab.active {
            color: white;
            background: linear-gradient(45deg, #4C1D95, #6D28D9);
        }

        .tab-content-upload {
            display: none;
            padding: 20px;
        }

        .tab-content-upload.active {
            display: block;
        }

        .upload-form {
            max-width: 600px;
            margin: 0 auto;
        }

        .upload-textarea {
            width: 100%;
            min-height: 150px;
            background: #1a1a1a;
            border: 1px solid #333;
            border-radius: 12px;
            color: white;
            padding: 15px;
            font-size: 16px;
            resize: vertical;
            margin-bottom: 20px;
            font-family: Arial, sans-serif;
        }

        .upload-textarea:focus {
            outline: none;
            border-color: #4C1D95;
        }

        .media-upload-section {
            margin-bottom: 20px;
        }

        .media-label {
            display: block;
            color: #aaa;
            font-size: 14px;
            margin-bottom: 10px;
        }

        .media-buttons {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }

        .media-btn {
            flex: 1;
            padding: 12px;
            background: #1a1a1a;
            border: 1px solid #333;
            border-radius: 8px;
            color: white;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .media-btn:hover {
            background: #222;
            border-color: #4C1D95;
        }

        .media-preview {
            min-height: 100px;
            background: #1a1a1a;
            border: 2px dashed #333;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #666;
            font-size: 14px;
        }

        .media-preview img,
        .media-preview video {
            max-width: 100%;
            max-height: 300px;
            border-radius: 8px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            color: #aaa;
            font-size: 14px;
            margin-bottom: 8px;
            font-weight: 500;
        }

        .text-input {
            width: 100%;
            padding: 12px 15px;
            background: #1a1a1a;
            border: 1px solid #333;
            border-radius: 8px;
            color: white;
            font-size: 14px;
        }

        .text-input:focus {
            outline: none;
            border-color: #4C1D95;
        }

        .file-input {
            width: 100%;
            padding: 12px;
            background: #1a1a1a;
            border: 1px solid #333;
            border-radius: 8px;
            color: white;
            font-size: 14px;
            cursor: pointer;
        }

        .monetization-options {
            display: flex;
            gap: 15px;
            align-items: center;
        }

        .toggle-label {
            display: flex;
            align-items: center;
            gap: 10px;
            color: #aaa;
            font-size: 14px;
            cursor: pointer;
        }

        .toggle-label input[type="checkbox"] {
            width: 18px;
            height: 18px;
            cursor: pointer;
        }

        .done-btn {
            width: 100%;
            padding: 15px;
            background: linear-gradient(45deg, #4C1D95, #6D28D9);
            border: none;
            border-radius: 12px;
            color: white;
            font-size: 16px;
            font-weight: 700;
            cursor: pointer;
            margin-top: 20px;
            transition: all 0.3s;
        }

        .done-btn:hover {
            opacity: 0.9;
            transform: translateY(-2px);
        }

        /* Preview Popup */
        .preview-popup {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.9);
            z-index: 3000;
            align-items: center;
            justify-content: center;
            overflow-y: auto;
            padding: 20px;
        }

        .preview-popup.active {
            display: flex;
        }

        .preview-modal {
            background: #1a1a1a;
            border-radius: 16px;
            padding: 30px;
            width: 100%;
            max-width: 500px;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
        }

        .preview-modal h2 {
            color: white;
            font-size: 22px;
            margin-bottom: 20px;
        }

        .preview-content {
            color: white;
        }

        .preview-media {
            width: 100%;
            min-height: 200px;
            background: #0a0a0a;
            border-radius: 12px;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }

        .preview-media img,
        .preview-media video {
            max-width: 100%;
            max-height: 300px;
            border-radius: 8px;
        }

        /* Mobile Responsive */
        @media (max-width: 480px) {
            .upload-tabs {
                top: 56px;
            }

            .upload-tab {
                padding: 8px 15px;
                font-size: 14px;
            }

            .monetization-options {
                flex-direction: column;
                align-items: stretch;
            }
        }
    </style>
</head>

<body>
    <!-- Upload Progress Container -->
    <div class="upload-progress-container" id="uploadProgressContainer">
        <div class="upload-progress-header" onclick="toggleUploadProgress()">
            <h3>ðŸ“¤ <span id="uploadProgressTitle">Uploading</span></h3>
            <button class="upload-toggle-btn">â–¼</button>
        </div>
        <div class="upload-progress-body">
            <!-- Step 1: Analyze -->
            <div class="upload-step">
                <div class="step-icon pending" id="step1Icon">1</div>
                <div class="step-content">
                    <div class="step-label">Analyzing Video</div>
                    <div class="step-progress" id="step1Progress">Checking size & format...</div>
                    <div class="step-bar" id="step1Bar">
                        <div class="step-bar-fill"></div>
                    </div>
                </div>
            </div>

            <!-- Step 2: Compress -->
            <div class="upload-step">
                <div class="step-icon pending" id="step2Icon">2</div>
                <div class="step-content">
                    <div class="step-label">Optimizing</div>
                    <div class="step-progress" id="step2Progress">Ready when needed</div>
                    <div class="step-bar" id="step2Bar">
                        <div class="step-bar-fill"></div>
                    </div>
                </div>
            </div>

            <!-- Step 3: Upload -->
            <div class="upload-step">
                <div class="step-icon pending" id="step3Icon">3</div>
                <div class="step-content">
                    <div class="step-label">Uploading to Cloud</div>
                    <div class="step-progress" id="step3Progress">Waiting...</div>
                    <div class="step-bar" id="step3Bar">
                        <div class="step-bar-fill"></div>
                    </div>
                </div>
            </div>

            <!-- Overall Progress -->
            <div class="overall-progress">
                <div class="overall-bar">
                    <div class="overall-bar-fill" id="overallBarFill"></div>
                </div>
                <div class="overall-stats">
                    <span id="uploadElapsedTime">0s</span>
                    <span id="uploadStats">0 MB / 0 MB</span>
                    <span id="uploadSpeed">0 MB/s</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Auth Modals -->
    <div class="modal-overlay" id="authModal">
        <div class="modal">
            <button class="modal-close" onclick="closeAuthModal()">Ã—</button>
            <div id="signupForm">
                <h2>Join Pose</h2>
                <div id="authError" class="error-msg" style="display:none;"></div>
                <input type="text" id="signupName" placeholder="Full Name" required>
                <input type="text" id="signupUsername" placeholder="Username" required>
                <input type="email" id="signupEmail" placeholder="Email" required>
                <input type="password" id="signupPassword" placeholder="Password (min 6 characters)" required>
                <button class="modal-btn" onclick="handleSignup()">Sign Up</button>
                <div class="modal-switch">
                    Already have an account? <a onclick="switchToLogin()">Log In</a>
                </div>
            </div>
            <div id="loginForm" style="display:none;">
                <h2>Welcome Back</h2>
                <div id="loginError" class="error-msg" style="display:none;"></div>
                <input type="email" id="loginEmail" placeholder="Email" required>
                <input type="password" id="loginPassword" placeholder="Password" required>
                <button class="modal-btn" onclick="handleLogin()">Log In</button>
                <div class="modal-switch">
                    Don't have an account? <a onclick="switchToSignup()">Sign Up</a>
                </div>
            </div>
        </div>
    </div>

    <!-- Profile Page -->
    <div class="profile-page" id="profilePage">
        <div class="profile-header">
            <button class="profile-back-btn" onclick="closeProfile()">â†</button>
            <button class="edit-profile-btn" onclick="openSettings()">Edit Profile</button>
            <button class="profile-settings-btn" onclick="logout()">âš™</button>
        </div>
        <div class="profile-info-section">
            <div class="profile-pic-large" id="profilePicLarge">U</div>
            <div class="profile-name" id="profileDisplayName">User Name</div>
            <div class="profile-username" id="profileUsernameDisplay">@username</div>
            <div class="profile-bio">African Creator | Skits | Exclusive Content ðŸ”¥<br>ðŸ“ Lagos, Nigeria</div>
            <div class="profile-stats">
                <div class="stat">
                    <div class="stat-value">12.5K</div>
                    <div class="stat-label">Followers</div>
                </div>
                <div class="stat">
                    <div class="stat-value">804</div>
                    <div class="stat-label">Following</div>
                </div>
                <div class="stat">
                    <div class="stat-value">108K</div>
                    <div class="stat-label">Likes</div>
                </div>
            </div>
            <div class="profile-stats">
                <div class="stat">
                    <div class="stat-value">550K</div>
                    <div class="stat-label">Total Views</div>
                </div>
                <div class="stat">
                    <div class="stat-value">â‚¦82,400</div>
                    <div class="stat-label">Earnings</div>
                </div>
            </div>
        </div>

        <!-- Settings Modal (Add right after profile-info-section closing div) -->
        <div class="modal-overlay" id="settingsModal">
            <div class="modal">
                <button class="modal-close" onclick="closeSettings()">Ã—</button>
                <h2>Edit Profile</h2>
                <div id="settingsError" class="error-msg" style="display:none;"></div>

                <!-- Profile Picture Upload -->
                <div style="text-align: center; margin-bottom: 20px;">
                    <div class="profile-pic-large" id="previewPic" style="margin: 0 auto 15px;">U</div>
                    <input type="file" id="profilePicInput" accept="image/*" style="display: none;">
                    <button class="modal-btn" onclick="document.getElementById('profilePicInput').click()"
                        style="background: #333;">
                        ðŸ“· Change Photo
                    </button>
                </div>

                <input type="text" id="editName" placeholder="Full Name">
                <input type="text" id="editUsername" placeholder="Username">
                <textarea id="editBio" placeholder="Bio"
                    style="width: 100%; min-height: 80px; background: #2a2a2a; border: 1px solid #444; border-radius: 8px; color: white; padding: 12px; font-size: 14px; margin-bottom: 15px; resize: vertical; font-family: Arial, sans-serif;"></textarea>
                <input type="text" id="editLocation" placeholder="Location (e.g., Lagos, Nigeria)">

                <button class="modal-btn" onclick="saveProfile()">Save Changes</button>
                <button class="modal-btn" onclick="closeSettings()"
                    style="background: #333; margin-top: 10px;">Cancel</button>
            </div>
        </div>
        <div class="profile-tabs">
            <div class="profile-tab active" onclick="switchProfileTab('feed')">Feed</div>
            <div class="profile-tab" onclick="switchProfileTab('exclusive')">Exclusive</div>
            <div class="profile-tab" onclick="switchProfileTab('shorts')">Shorts</div>
            <div class="profile-tab" onclick="switchProfileTab('tweets')">Tweets</div>
            <div class="profile-tab" onclick="switchProfileTab('liked')">Liked</div>
        </div>
        <div class="profile-content" id="profileContent">
            <!-- Feed Videos Tab -->
            <div id="feedTab">
                <div class="video-grid">
                    <div class="video-item">
                        <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); height: 100%;"></div>
                        <div class="video-stats">ðŸ’¬ 450 ðŸ‘ï¸ 2.3K</div>
                    </div>
                    <div class="video-item">
                        <div style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); height: 100%;"></div>
                        <div class="video-stats">ðŸ’¬ 380 ðŸ‘ï¸ 1.9K</div>
                    </div>
                    <div class="video-item">
                        <div style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); height: 100%;"></div>
                        <div class="video-stats">ðŸ’¬ 520 ðŸ‘ï¸ 3.1K</div>
                    </div>
                </div>
            </div>
            <!-- Exclusive Tab -->
            <div id="exclusiveTab" style="display:none;">
                <div class="video-grid">
                    <div class="video-item">
                        <div
                            style="background: linear-gradient(135deg, #fa709a 0%, #fee140 100%); height: 100%; display: flex; align-items: center; justify-content: center; font-size: 40px;">
                            ðŸ”’</div>
                        <div class="video-stats">â‚¦200 | ðŸ‘ï¸ 800</div>
                    </div>
                    <div class="video-item">
                        <div
                            style="background: linear-gradient(135deg, #30cfd0 0%, #330867 100%); height: 100%; display: flex; align-items: center; justify-content: center; font-size: 40px;">
                            ðŸ”’</div>
                        <div class="video-stats">â‚¦150 | ðŸ‘ï¸ 650</div>
                    </div>
                </div>
            </div>
            <!-- Tweets Tab -->
            <div id="tweetsTab" style="display:none;">
                <div class="post-section">
                    <textarea class="post-input" placeholder="What's on your mind?"></textarea>
                    <div class="post-actions">
                        <button class="post-btn">ðŸ“· Media</button>
                        <button class="post-btn">Post</button>
                    </div>
                </div>
                <div class="feed-post">
                    <div class="post-header">
                        <div class="post-avatar"></div>
                        <div>
                            <div class="post-author">You</div>
                            <div style="color: #666; font-size: 12px;">2 hours ago</div>
                        </div>
                    </div>
                    <div class="post-text">New exclusive dropping tonight ðŸ”¥</div>
                    <div class="post-stats">
                        <span>â¤ï¸ 1.2K</span>
                        <span>ðŸ’¬ 320</span>
                        <span>ðŸ” 150</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Original Feed UI (Keep these as is) -->
    <div class="navbar">
        <div class="profile-icon" onclick="handleProfileClick()">
            <svg width="22" height="22" viewBox="0 0 24 24" fill="white">
                <path
                    d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z" />
            </svg>
        </div>
        <div class="tabs">
            <span class="tab active">For You</span>
            <span class="tab">tweet</span>
            <span class="tab">Pose</span>
        </div>
        <div class="search-icon">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="black">
                <path
                    d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z" />
            </svg>
        </div>
    </div>
    <div class="bottom-nav">
        <div>
            <i><svg width="24" height="24" viewBox="0 0 24 24" fill="white">
                    <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z" />
                </svg></i>
            <span>Home</span>
        </div>
        <div>
            <i><svg width="24" height="24" viewBox="0 0 24 24" fill="white">
                    <path
                        d="M12 22c1.1 0 2-.9 2-2h-4c0 1.1.9 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z" />
                </svg></i>
            <span>Alert</span>
        </div>
        <div onclick="openUploadPage()">
            <i><svg width="24" height="24" viewBox="0 0 24 24" fill="white">
                    <path
                        d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm0-14c-3.31 0-6 2.69-6 6s2.69 6 6 6 6-2.69 6-6-2.69-6-6-6zm0 10c-2.21 0-4-1.79-4-4s1.79-4 4-4 4 1.79 4 4-1.79 4-4 4z" />
                </svg></i>
        </div>
        <div>
            <i><svg width="24" height="24" viewBox="0 0 24 24" fill="white">
                    <path
                        d="M17 10.5V7c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1v-3.5l4 4v-11l-4 4zM14 13h-3v3H9v-3H6v-2h3V8h2v3h3v2z" />
                </svg></i>
            <span>Live</span>
        </div>
        <div>
            <i><svg width="24" height="24" viewBox="0 0 24 24" fill="white">
                    <path d="M12 3v10.55c-.59-.34-1.27-.55-2-.55-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4V7h4V3h-6z" />
                </svg></i>
            <span>Music</span>
        </div>
    </div>



    <!-- The rest remains the same (friendTab and poseTab) --><!-- Tab Content Containers -->
    <div id="busTab" class="tab-content active">
        <!-- Video Feed (TikTok style) - This is your existing video-feed -->
        <!-- Scrollable feed -->
        <div class="video-feed">
            <!-- Post 1 -->
            <div class="video-post">
                <video src="https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4" autoplay
                    muted loop></video>
                <div class="play-pause-overlay">
                    <svg class="play-icon" viewBox="0 0 24 24">
                        <path d="M8 5v14l11-7z" />
                    </svg>
                    <svg class="pause-icon" viewBox="0 0 24 24" style="display: none;">
                        <path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z" />
                    </svg>
                </div>
                <div class="overlay">
                    <div class="sidebar">
                        <div>
                            <i>
                                <svg width="26" height="26" viewBox="0 0 24 24" fill="white">
                                    <path
                                        d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z" />
                                </svg>
                            </i>
                            <span>223k</span>
                        </div>
                        <div>
                            <i>
                                <svg width="26" height="26" viewBox="0 0 24 24" fill="white">
                                    <path
                                        d="M20 2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h4l4 4 4-4h4c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2z" />
                                </svg>
                            </i>
                            <span>223k</span>
                        </div>
                        <div>
                            <i>
                                <svg width="26" height="26" viewBox="0 0 24 24" fill="white">
                                    <path
                                        d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92s2.92-1.31 2.92-2.92-1.31-2.92-2.92-2.92z" />
                                </svg>
                            </i>
                            <span>223k</span>
                        </div>
                        <div>
                            <i>
                                <svg width="26" height="26" viewBox="0 0 24 24" fill="white">
                                    <path d="M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z" />
                                </svg>
                            </i>
                        </div>
                        <div>
                            <i>
                                <svg width="26" height="26" viewBox="0 0 24 24" fill="white">
                                    <path
                                        d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z" />
                                </svg>
                            </i>
                        </div>
                        <div class="speaker">
                            <i>
                                <svg width="26" height="26" viewBox="0 0 24 24" fill="white">
                                    <path
                                        d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z" />
                                </svg>
                            </i>
                        </div>
                    </div>
                    <div class="profile-section">
                        <div class="profile-pic">
                            <img src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' width='50' height='50'><rect width='50' height='50' fill='%23ff6b6b'/><text x='25' y='32' text-anchor='middle' fill='white' font-size='14' font-family='Arial'>CM</text></svg>"
                                alt="profile">
                            <div class="infinity-badge">âˆž</div>
                        </div>
                        <div class="profile-info">
                            <div class="name">CRAVING THE MONSTER</div>
                            <div class="followers">1.5M followers</div>
                        </div>
                        <button class="follow-btn">FOLLOW</button>
                    </div>
                    <div class="ad-caption">
                        <b>Discover the stories behind artists.</b> <span>See more >></span><br>
                        #Pose #meesu #oml
                    </div>
                    <div class="banner-ad">
                        <img src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' width='250' height='130'><rect width='250' height='130' fill='%234ecdc4'/><text x='125' y='70' text-anchor='middle' fill='white' font-size='18' font-family='Arial'>ðŸ  Dream Home</text></svg>"
                            alt="ad">
                        <div class="close-btn">Ã—</div>
                    </div>
                </div>
            </div>

            <!-- Post 2 -->
            <div class="video-post">
                <video src="https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/ElephantsDream.mp4"
                    autoplay muted loop></video>
                <div class="play-pause-overlay">
                    <svg class="play-icon" viewBox="0 0 24 24">
                        <path d="M8 5v14l11-7z" />
                    </svg>
                    <svg class="pause-icon" viewBox="0 0 24 24" style="display: none;">
                        <path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z" />
                    </svg>
                </div>
                <div class="overlay">
                    <div class="sidebar">
                        <div>
                            <i>
                                <svg width="26" height="26" viewBox="0 0 24 24" fill="white">
                                    <path
                                        d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z" />
                                </svg>
                            </i>
                            <span>89k</span>
                        </div>
                        <div>
                            <i>
                                <svg width="26" height="26" viewBox="0 0 24 24" fill="white">
                                    <path
                                        d="M20 2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h4l4 4 4-4h4c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2z" />
                                </svg>
                            </i>
                            <span>14k</span>
                        </div>
                        <div>
                            <i>
                                <svg width="26" height="26" viewBox="0 0 24 24" fill="white">
                                    <path
                                        d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92s2.92-1.31 2.92-2.92-1.31-2.92-2.92-2.92z" />
                                </svg>
                            </i>
                            <span>5k</span>
                        </div>
                        <div>
                            <i>
                                <svg width="26" height="26" viewBox="0 0 24 24" fill="white">
                                    <path d="M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z" />
                                </svg>
                            </i>
                        </div>
                        <div>
                            <i>
                                <svg width="26" height="26" viewBox="0 0 24 24" fill="white">
                                    <path
                                        d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z" />
                                </svg>
                            </i>
                        </div>
                        <div class="speaker">
                            <i>
                                <svg width="26" height="26" viewBox="0 0 24 24" fill="white">
                                    <path
                                        d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z" />
                                </svg>
                            </i>
                        </div>
                    </div>
                    <div class="profile-section">
                        <div class="profile-pic">
                            <img src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' width='50' height='50'><rect width='50' height='50' fill='%234ecdc4'/><text x='25' y='32' text-anchor='middle' fill='white' font-size='16' font-family='Arial'>DJ</text></svg>"
                                alt="profile">
                            <div class="infinity-badge">âˆž</div>
                        </div>
                        <div class="profile-info">
                            <div class="name">DJ SMOKEY</div>
                            <div class="followers">900K followers</div>
                        </div>
                        <button class="follow-btn">FOLLOW</button>
                    </div>
                    <div class="ad-caption">
                        <b>Join the hottest party of 2025!</b> <span>Tap now >></span><br>
                        #Party #Vibes #Live
                    </div>
                    <div class="banner-ad">
                        <img src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' width='250' height='130'><rect width='250' height='130' fill='%23667eea'/><text x='125' y='70' text-anchor='middle' fill='white' font-size='18' font-family='Arial'>ðŸŽ‰ Club Night</text></svg>"
                            alt="ad">
                        <div class="close-btn">Ã—</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="friendTab" class="tab-content" style="display: none;">
        <div class="tweet-feed-page">
            <!-- Create Post Section -->
            <div class="create-post-card">
                <div class="create-post-header">
                    <div class="user-avatar" id="tweetUserAvatar"></div>
                    <textarea class="create-post-input" placeholder="What's happening?" maxlength="500"></textarea>
                </div>
                <div class="create-post-actions">
                    <div class="action-buttons">
                        <button class="action-icon-btn">ðŸ–¼ï¸ Add Media</button>
                        <button class="action-icon-btn">ðŸŽ¥ Video</button>
                        <button class="action-icon-btn">ðŸ“ Tag Creator</button>
                    </div>
                    <button class="post-submit-btn">POST ðŸ”˜</button>
                </div>
            </div>

            <!-- Feed Timeline -->
            <div class="feed-timeline">
                <!-- Post 1 -->
                <div class="timeline-post">
                    <div class="post-user-info">
                        <div class="user-avatar"></div>
                        <div class="user-details">
                            <div class="user-name">Display Name <span class="verified">âœ”</span></div>
                            <div class="user-handle">@username â€¢ 2m ago</div>
                        </div>
                    </div>
                    <div class="post-content">
                        <p class="post-text">Just dropped my latest dance clip ðŸ’ƒðŸ¾ #PoseChallenge</p>
                        <div class="post-media">
                            <div class="media-thumbnail"
                                style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); height: 250px; border-radius: 12px;">
                            </div>
                        </div>
                    </div>
                    <div class="post-interactions">
                        <span class="interaction-btn">â¤ï¸ 3.2K</span>
                        <span class="interaction-btn">ðŸ’¬ 220</span>
                        <span class="interaction-btn">ðŸ” 80</span>
                        <span class="interaction-btn tip-btn">ðŸ’¸ Tip Creator</span>
                    </div>
                </div>

                <!-- Post 2 -->
                <div class="timeline-post">
                    <div class="post-user-info">
                        <div class="user-avatar"></div>
                        <div class="user-details">
                            <div class="user-name">Creator Name <span class="verified">âœ”</span></div>
                            <div class="user-handle">@creatorhandle â€¢ 25m ago</div>
                        </div>
                    </div>
                    <div class="post-content">
                        <p class="post-text">I made â‚¦10,000 today from exclusive views ðŸ˜ðŸ”¥</p>
                        <div class="post-media">
                            <div class="media-thumbnail"
                                style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); height: 200px; border-radius: 12px;">
                            </div>
                        </div>
                    </div>
                    <div class="post-interactions">
                        <span class="interaction-btn">â¤ï¸ 2.1K</span>
                        <span class="interaction-btn">ðŸ’¬ 180</span>
                        <span class="interaction-btn">ðŸ” 75</span>
                        <span class="interaction-btn tip-btn">ðŸ’¸ Tip Creator</span>
                    </div>
                </div>

                <!-- Post 3 -->
                <div class="timeline-post">
                    <div class="post-user-info">
                        <div class="user-avatar"></div>
                        <div class="user-details">
                            <div class="user-name">@user</div>
                            <div class="user-handle">1h ago</div>
                        </div>
                    </div>
                    <div class="post-content">
                        <p class="post-text">Pose feed is cleaner than Twitter ngl ðŸ˜Ž</p>
                    </div>
                    <div class="post-interactions">
                        <span class="interaction-btn">â¤ï¸ 540</span>
                        <span class="interaction-btn">ðŸ’¬ 70</span>
                        <span class="interaction-btn">ðŸ” 18</span>
                        <span class="interaction-btn tip-btn">ðŸ’¸ Tip Creator</span>
                    </div>
                </div>

                <!-- Post 4 -->
                <div class="timeline-post">
                    <div class="post-user-info">
                        <div class="user-avatar"></div>
                        <div class="user-details">
                            <div class="user-name">@creator</div>
                            <div class="user-handle">3h ago</div>
                        </div>
                    </div>
                    <div class="post-content">
                        <p class="post-text">Uploading new exclusive content tonight ðŸš€</p>
                        <div class="post-media">
                            <div class="media-thumbnail"
                                style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); height: 220px; border-radius: 12px;">
                            </div>
                        </div>
                    </div>
                    <div class="post-interactions">
                        <span class="interaction-btn">â¤ï¸ 1.9K</span>
                        <span class="interaction-btn">ðŸ’¬ 200</span>
                        <span class="interaction-btn">ðŸ” 60</span>
                        <span class="interaction-btn tip-btn">ðŸ’¸ Tip Creator</span>
                    </div>
                </div>
            </div>

            <!-- Show More Section -->
            <div class="load-more-section">
                <button class="load-more-btn">Show More Posts ðŸ”½</button>
                <p class="load-more-text">Scroll to load more...</p>
            </div>
        </div>
    </div>

    <div id="poseTab" class="tab-content" style="display: none;">
        <!-- Video Grid -->
        <div class="video-grid-page">
            <div class="grid-header">
                <h2>My Videos</h2>
            </div>

            <div class="video-grid-container">
                <!-- Video Item 1 -->
                <div class="grid-video-item">
                    <div class="grid-thumbnail" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
                    </div>
                    <div class="grid-info">
                        <div class="grid-title">Dance Challenge Day 1</div>
                        <div class="grid-stats">
                            <span>ðŸ‘ï¸ 12K</span>
                            <span>â‚¦2,000</span>
                        </div>
                    </div>
                </div>

                <!-- Video Item 2 -->
                <div class="grid-video-item">
                    <div class="grid-thumbnail" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);">
                    </div>
                    <div class="grid-info">
                        <div class="grid-title">Comedy Skit #5</div>
                        <div class="grid-stats">
                            <span>ðŸ‘ï¸ 8.5K</span>
                            <span>â‚¦1,500</span>
                        </div>
                    </div>
                </div>

                <!-- Video Item 3 -->
                <div class="grid-video-item">
                    <div class="grid-thumbnail" style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);">
                    </div>
                    <div class="grid-info">
                        <div class="grid-title">Tutorial Video</div>
                        <div class="grid-stats">
                            <span>ðŸ‘ï¸ 5K</span>
                            <span>â‚¦800</span>
                        </div>
                    </div>
                </div>

                <!-- Video Item 4 -->
                <div class="grid-video-item">
                    <div class="grid-thumbnail" style="background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);">
                    </div>
                    <div class="grid-info">
                        <div class="grid-title">Music Video</div>
                        <div class="grid-stats">
                            <span>ðŸ‘ï¸ 9K</span>
                            <span>â‚¦1,200</span>
                        </div>
                    </div>
                </div>

                <!-- Video Item 5 -->
                <div class="grid-video-item">
                    <div class="grid-thumbnail" style="background: linear-gradient(135deg, #30cfd0 0%, #330867 100%);">
                    </div>
                    <div class="grid-info">
                        <div class="grid-title">Behind The Scenes</div>
                        <div class="grid-stats">
                            <span>ðŸ‘ï¸ 7.2K</span>
                            <span>â‚¦1,000</span>
                        </div>
                    </div>
                </div>

                <!-- Video Item 6 -->
                <div class="grid-video-item">
                    <div class="grid-thumbnail" style="background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);">
                    </div>
                    <div class="grid-info">
                        <div class="grid-title">Live Stream Recap</div>
                        <div class="grid-stats">
                            <span>ðŸ‘ï¸ 4.1K</span>
                            <span>â‚¦600</span>
                        </div>
                    </div>
                </div>
                <!-- Video Item 3 -->
                <div class="grid-video-item">
                    <div class="grid-thumbnail" style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);">
                    </div>
                    <div class="grid-info">
                        <div class="grid-title">Tutorial Video</div>
                        <div class="grid-stats">
                            <span>ðŸ‘ï¸ 5K</span>
                            <span>â‚¦800</span>
                        </div>
                    </div>
                </div>

                <!-- Video Item 4 -->
                <div class="grid-video-item">
                    <div class="grid-thumbnail" style="background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);">
                    </div>
                    <div class="grid-info">
                        <div class="grid-title">Music Video</div>
                        <div class="grid-stats">
                            <span>ðŸ‘ï¸ 9K</span>
                            <span>â‚¦1,200</span>
                        </div>
                    </div>
                </div>
                <!-- Video Item 3 -->
                <div class="grid-video-item">
                    <div class="grid-thumbnail" style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);">
                    </div>
                    <div class="grid-info">
                        <div class="grid-title">Tutorial Video</div>
                        <div class="grid-stats">
                            <span>ðŸ‘ï¸ 5K</span>
                            <span>â‚¦800</span>
                        </div>
                    </div>
                </div>

                <!-- Video Item 4 -->
                <div class="grid-video-item">
                    <div class="grid-thumbnail" style="background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);">
                    </div>
                    <div class="grid-info">
                        <div class="grid-title">Music Video</div>
                        <div class="grid-stats">
                            <span>ðŸ‘ï¸ 9K</span>
                            <span>â‚¦1,200</span>
                        </div>
                    </div>
                </div>
                <!-- Video Item 3 -->
                <div class="grid-video-item">
                    <div class="grid-thumbnail" style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);">
                    </div>
                    <div class="grid-info">
                        <div class="grid-title">Tutorial Video</div>
                        <div class="grid-stats">
                            <span>ðŸ‘ï¸ 5K</span>
                            <span>â‚¦800</span>
                        </div>
                    </div>
                </div>

                <!-- Video Item 4 -->
                <div class="grid-video-item">
                    <div class="grid-thumbnail" style="background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);">
                    </div>
                    <div class="grid-info">
                        <div class="grid-title">Music Video</div>
                        <div class="grid-stats">
                            <span>ðŸ‘ï¸ 9K</span>
                            <span>â‚¦1,200</span>
                        </div>
                    </div>
                </div>
                <!-- Video Item 3 -->
                <div class="grid-video-item">
                    <div class="grid-thumbnail" style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);">
                    </div>
                    <div class="grid-info">
                        <div class="grid-title">Tutorial Video</div>
                        <div class="grid-stats">
                            <span>ðŸ‘ï¸ 5K</span>
                            <span>â‚¦800</span>
                        </div>
                    </div>
                </div>

                <!-- Video Item 4 -->
                <div class="grid-video-item">
                    <div class="grid-thumbnail" style="background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);">
                    </div>
                    <div class="grid-info">
                        <div class="grid-title">Music Video</div>
                        <div class="grid-stats">
                            <span>ðŸ‘ï¸ 9K</span>
                            <span>â‚¦1,200</span>
                        </div>
                    </div>
                </div>
                <!-- Video Item 3 -->
                <div class="grid-video-item">
                    <div class="grid-thumbnail" style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);">
                    </div>
                    <div class="grid-info">
                        <div class="grid-title">Tutorial Video</div>
                        <div class="grid-stats">
                            <span>ðŸ‘ï¸ 5K</span>
                            <span>â‚¦800</span>
                        </div>
                    </div>
                </div>

                <!-- Video Item 4 -->
                <div class="grid-video-item">
                    <div class="grid-thumbnail" style="background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);">
                    </div>
                    <div class="grid-info">
                        <div class="grid-title">Music Video</div>
                        <div class="grid-stats">
                            <span>ðŸ‘ï¸ 9K</span>
                            <span>â‚¦1,200</span>
                        </div>
                    </div>
                </div>
                <!-- Video Item 3 -->
                <div class="grid-video-item">
                    <div class="grid-thumbnail" style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);">
                    </div>
                    <div class="grid-info">
                        <div class="grid-title">Tutorial Video</div>
                        <div class="grid-stats">
                            <span>ðŸ‘ï¸ 5K</span>
                            <span>â‚¦800</span>
                        </div>
                    </div>
                </div>

                <!-- Video Item 4 -->
                <div class="grid-video-item">
                    <div class="grid-thumbnail" style="background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);">
                    </div>
                    <div class="grid-info">
                        <div class="grid-title">Music Video</div>
                        <div class="grid-stats">
                            <span>ðŸ‘ï¸ 9K</span>
                            <span>â‚¦1,200</span>
                        </div>
                    </div>
                </div>
                <!-- Video Item 3 -->
                <div class="grid-video-item">
                    <div class="grid-thumbnail" style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);">
                    </div>
                    <div class="grid-info">
                        <div class="grid-title">Tutorial Video</div>
                        <div class="grid-stats">
                            <span>ðŸ‘ï¸ 5K</span>
                            <span>â‚¦800</span>
                        </div>
                    </div>
                </div>

                <!-- Video Item 4 -->
                <div class="grid-video-item">
                    <div class="grid-thumbnail" style="background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);">
                    </div>
                    <div class="grid-info">
                        <div class="grid-title">Music Video</div>
                        <div class="grid-stats">
                            <span>ðŸ‘ï¸ 9K</span>
                            <span>â‚¦1,200</span>
                        </div>
                    </div>
                </div>
                <!-- Video Item 3 -->
                <div class="grid-video-item">
                    <div class="grid-thumbnail" style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);">
                    </div>
                    <div class="grid-info">
                        <div class="grid-title">Tutorial Video</div>
                        <div class="grid-stats">
                            <span>ðŸ‘ï¸ 5K</span>
                            <span>â‚¦800</span>
                        </div>
                    </div>
                </div>

                <!-- Video Item 4 -->
                <div class="grid-video-item">
                    <div class="grid-thumbnail" style="background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);">
                    </div>
                    <div class="grid-info">
                        <div class="grid-title">Music Video</div>
                        <div class="grid-stats">
                            <span>ðŸ‘ï¸ 9K</span>
                            <span>â‚¦1,200</span>
                        </div>
                    </div>
                </div>
                <!-- Video Item 3 -->
                <div class="grid-video-item">
                    <div class="grid-thumbnail" style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);">
                    </div>
                    <div class="grid-info">
                        <div class="grid-title">Tutorial Video</div>
                        <div class="grid-stats">
                            <span>ðŸ‘ï¸ 5K</span>
                            <span>â‚¦800</span>
                        </div>
                    </div>
                </div>

                <!-- Video Item 4 -->
                <div class="grid-video-item">
                    <div class="grid-thumbnail" style="background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);">
                    </div>
                    <div class="grid-info">
                        <div class="grid-title">Music Video</div>
                        <div class="grid-stats">
                            <span>ðŸ‘ï¸ 9K</span>
                            <span>â‚¦1,200</span>
                        </div>
                    </div>
                </div>
                <!-- Video Item 3 -->
                <div class="grid-video-item">
                    <div class="grid-thumbnail" style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);">
                    </div>
                    <div class="grid-info">
                        <div class="grid-title">Tutorial Video</div>
                        <div class="grid-stats">
                            <span>ðŸ‘ï¸ 5K</span>
                            <span>â‚¦800</span>
                        </div>
                    </div>
                </div>

                <!-- Video Item 4 -->
                <div class="grid-video-item">
                    <div class="grid-thumbnail" style="background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);">
                    </div>
                    <div class="grid-info">
                        <div class="grid-title">Music Video</div>
                        <div class="grid-stats">
                            <span>ðŸ‘ï¸ 9K</span>
                            <span>â‚¦1,200</span>
                        </div>
                    </div>
                </div>

            </div>

            <div class="load-more">
                <button class="load-more-btn">Load More Videos ðŸ”½</button>
            </div>
        </div>
    </div>
    <!-- Welcome Popup -->
    <div class="welcome-overlay" id="welcomePopup">
        <div class="welcome-modal">
            <!-- Logo and Branding -->
            <div class="welcome-logo">
                <div class="logo-icon">
                    <img src="https://i.ibb.co/60JJMHGJ/Red-and-White-Video-Centric-Coming-Soon-Instagram-Post-20250917-230708-0000.png"
                        alt="Red-and-White-Video-Centric-Coming-Soon-Instagram-Post-20250917-230708-0000"
                        class="logo-img" />
                </div>
                <h1 class="logo-text">POSE</h1>
            </div>



            <!-- Welcome Message -->
            <div class="welcome-message">
                <h2>Welcome to Pose (sample version)</h2>
                <p>Pose helps African creators get <strong>instant</strong> and <strong>multiple revenue models</strong>
                </p>
                <div class="features-list">
                    <div class="feature-item">âœ… Get paid from 100 views</div>
                    <div class="feature-item">âœ… Earn 70-85% of your revenue</div>
                    <div class="feature-item">âœ… Multiple income streams</div>
                    <div class="feature-item">âœ… Instant withdrawals</div>
                </div>
            </div>

            <!-- Auth Buttons -->
            <div class="welcome-actions">
                <button class="welcome-btn signup-btn" onclick="openSignupFromWelcome()">
                    Create Account
                </button>
                <button class="welcome-btn login-btn" onclick="openLoginFromWelcome()">
                    Sign In
                </button>
                <button class="skip-btn" onclick="closeWelcomePopup()">
                    Skip for now
                </button>
            </div>

            <!-- Footer -->
            <div class="welcome-footer">
                <p>Join thousands of African creators earning today ðŸš€</p>
            </div>
        </div>
    </div>

    <!-- Upload Page -->
    <div class="upload-page" id="uploadPage">
        <!-- Header -->
        <div class="upload-header">
            <button class="back-btn" onclick="closeUploadPage()">â†</button>
            <h1>Upload Content</h1>
            <div class="header-spacer"></div>
        </div>

        <!-- Tabs -->
        <div class="upload-tabs">
            <div class="upload-tab active" onclick="switchUploadTab('tweet')">Tweet</div>
            <div class="upload-tab" onclick="switchUploadTab('post')">Post</div>
            <div class="upload-tab" onclick="switchUploadTab('exclusive')">Exclusive</div>
        </div>

        <!-- Tweet Tab Content -->
        <div class="tab-content-upload active" id="tweetTab">
            <div class="upload-form">
                <textarea class="upload-textarea" id="tweetText" placeholder="What's on your mind?"
                    maxlength="500"></textarea>

                <div class="media-upload-section">
                    <label class="media-label">Attach Media (Optional)</label>
                    <div class="media-buttons">
                        <input type="file" id="tweetMedia" accept="image/*,video/*" style="display: none;"
                            onchange="autoUploadVideo(this, 'tweet')">
                        <button class="media-btn" onclick="document.getElementById('tweetMedia').click()">ðŸ“·
                            Image</button>
                        <button class="media-btn" onclick="document.getElementById('tweetMedia').click()">ðŸŽ¥
                            Video</button>
                    </div>
                    <div id="tweetUploadStatus" style="color: #aaa; font-size: 12px; margin-top: 8px;"></div>
                    <div id="tweetMediaPreview" class="media-preview"></div>
                </div>

                <button class="done-btn" onclick="openTweetPreview()">Done</button>
            </div>
        </div>

        <!-- Debug Panel -->
        <div id="debugPanel"
            style="background: #222; color: #0f0; padding: 15px; margin-bottom: 15px; border-radius: 8px; font-family: monospace; font-size: 12px; max-height: 150px; overflow-y: auto; display: none;">
            <div style="text-align: right;">
                <button onclick="document.getElementById('debugPanel').style.display='none'"
                    style="background: #444; color: white; border: none; padding: 5px 10px; cursor: pointer; border-radius: 4px;">Close</button>
            </div>
            <div id="debugLog"></div>
        </div>

        <!-- Post Tab Content -->
        <div class="tab-content-upload" id="postTab">
            <div class="upload-form">
                <button type="button" onclick="toggleDebug()"
                    style="background: #666; color: white; padding: 8px 15px; border: none; border-radius: 4px; cursor: pointer; margin-bottom: 15px; width: 100%;">ðŸ“Š
                    Toggle Debug Panel</button>
                <div class="form-group">
                    <label class="form-label">Upload Video</label>
                    <input type="file" id="postVideo" accept="video/*" class="file-input"
                        onchange="autoUploadVideo(this, 'post')">
                    <div id="postUploadStatus" style="color: #aaa; font-size: 12px; margin-top: 8px;"></div>
                    <div id="postVideoPreview" class="media-preview"></div>
                </div>

                <div class="form-group">
                    <label class="form-label">Title</label>
                    <input type="text" id="postTitle" class="text-input" placeholder="Enter video title">
                </div>

                <div class="form-group">
                    <label class="form-label">Description</label>
                    <textarea id="postDescription" class="upload-textarea" placeholder="Describe your video..."
                        rows="4"></textarea>
                </div>

                <div class="form-group">
                    <label class="form-label">Tags</label>
                    <input type="text" id="postTags" class="text-input" placeholder="#fun #pose #viral">
                </div>

                <div class="form-group">
                    <label class="form-label">Monetization</label>
                    <div class="monetization-options">
                        <input type="number" id="postPrice" class="text-input" placeholder="Pay-per-view price (â‚¦)"
                            style="flex: 1;">
                        <label class="toggle-label">
                            <input type="checkbox" id="postFree"> Free Video
                        </label>
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label">Thumbnail</label>
                    <input type="file" id="postThumbnail" accept="image/*" class="file-input">
                    <div id="postThumbnailPreview" class="media-preview"></div>
                </div>

                <button class="done-btn" onclick="window.uploadPost()">Post Video</button>
            </div>
        </div>

        <!-- Exclusive Tab Content -->
        <div class="tab-content-upload" id="exclusiveTab">
            <div class="upload-form">
                <div class="form-group">
                    <label class="form-label">Record or Upload Video</label>
                    <div class="media-buttons">
                        <button class="media-btn">ðŸ“¹ Record</button>
                        <input type="file" id="exclusiveVideo" accept="video/*" style="display: none;"
                            onchange="autoUploadVideo(this, 'exclusive')">
                        <button class="media-btn" onclick="document.getElementById('exclusiveVideo').click()">ðŸ“¤
                            Upload</button>
                    </div>
                    <div id="exclusiveUploadStatus" style="color: #aaa; font-size: 12px; margin-top: 8px;"></div>
                    <div id="exclusiveVideoPreview" class="media-preview"></div>
                </div>

                <button class="done-btn" onclick="openExclusivePreview()">Done</button>
            </div>
        </div>
    </div>

    <!-- Tweet Preview Popup -->
    <div class="preview-popup" id="tweetPreviewPopup">
        <div class="preview-modal">
            <button class="modal-close" onclick="closeTweetPreview()">Ã—</button>
            <h2>Preview & Details</h2>

            <div class="preview-content">
                <div id="tweetPreviewMedia" class="preview-media"></div>

                <div class="form-group">
                    <label class="form-label">Caption</label>
                    <textarea id="tweetCaption" class="text-input" rows="3" placeholder="Add a caption..."></textarea>
                </div>

                <div class="form-group">
                    <label class="form-label">Hashtags</label>
                    <input type="text" id="tweetHashtags" class="text-input" placeholder="#fun #pose">
                </div>

                <div class="form-group">
                    <label class="toggle-label">
                        <span>Allow Ads</span>
                        <input type="checkbox" id="tweetAllowAds" checked>
                    </label>
                </div>

                <div class="form-group">
                    <label class="form-label">Collaborators (Optional)</label>
                    <input type="text" id="tweetCollaborators" class="text-input" placeholder="@username">
                </div>

                <div class="form-group">
                    <label class="toggle-label">
                        <span>Allow Comments</span>
                        <input type="checkbox" id="tweetAllowComments" checked>
                    </label>
                </div>

                <div class="form-group">
                    <label class="toggle-label">
                        <span>Allow Save</span>
                        <input type="checkbox" id="tweetAllowSave" checked>
                    </label>
                </div>

                <button class="done-btn" onclick="postTweet()">Post</button>
            </div>
        </div>
    </div>

    <!-- Exclusive Preview Popup -->
    <div class="preview-popup" id="exclusivePreviewPopup">
        <div class="preview-modal">
            <button class="modal-close" onclick="closeExclusivePreview()">Ã—</button>
            <h2>Preview & Details</h2>

            <div class="preview-content">
                <div id="exclusivePreviewVideo" class="preview-media"></div>

                <div class="form-group">
                    <label class="form-label">Caption</label>
                    <textarea id="exclusiveCaption" class="text-input" rows="3"
                        placeholder="Add a caption..."></textarea>
                </div>

                <div class="form-group">
                    <label class="form-label">Hashtags</label>
                    <input type="text" id="exclusiveHashtags" class="text-input" placeholder="#fun #pose">
                </div>

                <div class="form-group">
                    <label class="toggle-label">
                        <span>Allow Ads</span>
                        <input type="checkbox" id="exclusiveAllowAds" checked>
                    </label>
                </div>

                <div class="form-group">
                    <label class="form-label">Collaborators (Optional)</label>
                    <input type="text" id="exclusiveCollaborators" class="text-input" placeholder="@username">
                </div>

                <div class="form-group">
                    <label class="toggle-label">
                        <span>Allow Comments</span>
                        <input type="checkbox" id="exclusiveAllowComments" checked>
                    </label>
                </div>

                <div class="form-group">
                    <label class="toggle-label">
                        <span>Allow Save Video</span>
                        <input type="checkbox" id="exclusiveAllowSave" checked>
                    </label>
                </div>

                <button class="done-btn" onclick="postExclusive()">Post</button>
            </div>
        </div>
    </div>

    <!-- Firebase Scripts -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-storage-compat.js"></script>

    <script>
        console.log('Script loaded!');

        // Firebase config
        const firebaseConfig = {
            apiKey: "AIzaSyDW8V2SjNITrA4LcdmeILh944mTbOKnM0c",
            authDomain: "rewarderhub.firebaseapp.com",
            projectId: "rewarderhub",
            storageBucket: "rewarderhub.appspot.com",
            messagingSenderId: "85965945106",
            appId: "1:85965945106:web:fa0a57d8968926e1041bcb",
            measurementId: "G-F2ERB5NGN0"
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const db = firebase.firestore();
        const storage = firebase.storage();

        let currentUser = null;

        // ====== Cloudinary Config ======
        const CLOUDINARY_CLOUD_NAME = 'dzhdgxjhl';
        const CLOUDINARY_UPLOAD_PRESET = 'posepreset';
        const CLOUDINARY_API_URL = `https://api.cloudinary.com/v1_1/${CLOUDINARY_CLOUD_NAME}/auto/upload`;

        // ====== Upload Variables ======
        let postVideoUrl = null;
        let postVideoFileName = null;
        let postVideoQuality = 'hd';
        let exclusiveVideoUrl = null;
        let exclusiveVideoFileName = null;
        let tweetMediaUrl = null;
        let tweetMediaFileName = null;

        let isPostVideoUploading = false;
        let isExclusiveVideoUploading = false;
        let isTweetMediaUploading = false;

        // Auth State Listener
        auth.onAuthStateChanged((user) => {
            if (user) {
                currentUser = user;
                console.log('âœ… User logged in:', user.uid);
                loadUserProfile(user.uid);
            } else {
                currentUser = null;
                console.log('âŒ User logged out');
            }
        });

        // Debug: Log function availability
        console.log('âœ… Functions loaded:', {
            postTweet: typeof window.postTweet,
            uploadPost: typeof window.uploadPost,
            postExclusive: typeof window.postExclusive
        });

        // ====== CLOUDINARY UPLOAD FUNCTION ======
        async function uploadToCloudinary(file, uploadType, quality = 'hd') {
            if (!currentUser) {
                alert('Please login first');
                return null;
            }

            if (!file) return null;

            const fileName = `${Date.now()}_${file.name}`;
            const formData = new FormData();
            formData.append('file', file);
            formData.append('upload_preset', CLOUDINARY_UPLOAD_PRESET);
            formData.append('tags', `${uploadType},${currentUser.uid}`);
            formData.append('folder', uploadType);

            try {
                console.log(`ðŸš€ Uploading ${uploadType} to Cloudinary...`);

                const response = await fetch(CLOUDINARY_API_URL, {
                    method: 'POST',
                    body: formData
                });

                if (!response.ok) throw new Error(`Upload failed: ${response.status}`);

                const data = await response.json();
                console.log(`âœ… ${uploadType} uploaded:`, data.secure_url);

                return {
                    url: data.secure_url,
                    fileName: fileName,
                    publicId: data.public_id
                };
            } catch (error) {
                console.error(`âŒ ${uploadType} upload error:`, error);
                throw error;
            }
        }

        // ====== VIDEO COMPRESSION FUNCTION ======
        async function compressVideo(file, quality = 'hd') {
            const MAX_SIZE_GB = 4.5;
            const MAX_SIZE_BYTES = MAX_SIZE_GB * 1024 * 1024 * 1024;

            if (file.size <= MAX_SIZE_BYTES) {
                console.log('âœ… Video within size limit, no compression needed');
                return { file: file, compressed: false, originalSize: file.size, compressedSize: file.size };
            }

            console.log(`âš ï¸ Video size: ${(file.size / (1024 ** 3)).toFixed(2)}GB - Compressing...`);

            // Note: Actual video compression requires FFmpeg (server-side recommended)
            // For now, we'll use Cloudinary's transformations
            return {
                file: file,
                compressed: true,
                originalSize: file.size,
                compressedSize: MAX_SIZE_BYTES,
                quality: quality
            };
        }

        // ====== AUTO-UPLOAD FUNCTION (Handles Post & Tweet) ======
        function autoUploadVideo(fileInput, uploadType) {
            if (!currentUser) {
                alert('Please login first');
                return;
            }

            const file = fileInput.files[0];
            if (!file) return;

            // Show upload UI based on type
            if (uploadType === 'post') {
                showPostUploadUI();
            } else if (uploadType === 'tweet') {
                showTweetUploadUI();
            }

            // Start upload in background
            startUploadProcess(file, uploadType);
        }

        // ====== UPLOAD PROCESS (WITH PROGRESS TRACKING) ======
        async function startUploadProcess(file, uploadType) {
            try {
                // Show progress container
                showUploadProgress();

                let statusElement = null;
                if (uploadType === 'post') {
                    statusElement = document.getElementById('postUploadStatus');
                } else if (uploadType === 'tweet') {
                    statusElement = document.getElementById('tweetUploadStatus');
                }

                const sizeGB = (file.size / (1024 ** 3)).toFixed(2);
                const sizeMB = (file.size / (1024 ** 2)).toFixed(2);
                const needsCompression = sizeGB > 4.5;

                // ====== STEP 1: ANALYZE ======
                updateStepProgress(1, `Analyzing ${sizeMB}MB...`, 0, true);
                await new Promise(resolve => setTimeout(resolve, 800));
                updateStepProgress(1, `âœ“ Format: ${file.type.split('/')[1].toUpperCase()}`, 100);

                // ====== STEP 2: OPTIMIZE ======
                updateStepProgress(2, needsCompression ? 'Compressing...' : 'No compression needed', 0, true);

                if (needsCompression) {
                    // Simulate compression (actual compression would happen here)
                    const compressionSteps = [30, 60, 100];
                    for (let progress of compressionSteps) {
                        await new Promise(resolve => setTimeout(resolve, 500));
                        const compressedSize = (file.size * (1 - (progress / 100) * 0.3)).toFixed(2);
                        updateStepProgress(2, `Optimizing: ${compressedSize}MB`, progress);
                    }
                    updateStepProgress(2, `Optimized from ${sizeGB}GB to 4.5GB`, 100);
                } else {
                    await new Promise(resolve => setTimeout(resolve, 500));
                    updateStepProgress(2, `Video ready: ${sizeMB}MB`, 100);
                }

                // ====== STEP 3: UPLOAD ======
                updateStepProgress(3, `Uploading...`, 0, true);

                const result = await uploadToCloudinaryWithProgress(file, uploadType, postVideoQuality);

                if (uploadType === 'post') {
                    postVideoUrl = result.url;
                    postVideoFileName = result.fileName;
                } else if (uploadType === 'tweet') {
                    tweetMediaUrl = result.url;
                    tweetMediaFileName = result.fileName;
                }

                // Complete upload step
                updateStepProgress(3, `âœ“ Uploaded successfully`, 100);

                // Update overall progress
                document.getElementById('overallBarFill').style.width = '100%';
                document.getElementById('uploadProgressTitle').textContent = 'Complete!';

                if (statusElement) {
                    statusElement.innerHTML = `âœ… Ready to post`;
                }

                console.log(`âœ… ${uploadType} ready:`, result.url);

                // Hide progress after 2 seconds
                setTimeout(() => {
                    hideUploadProgress();
                }, 2000);

            } catch (error) {
                console.error(`Error uploading ${uploadType}:`, error);
                updateStepProgress(3, `âŒ Upload failed`, 0);
                alert(`âŒ Upload failed: ${error.message}`);
                setTimeout(() => {
                    hideUploadProgress();
                }, 2000);
            }
        }

        // ====== UPLOAD WITH PROGRESS TRACKING ======
        async function uploadToCloudinaryWithProgress(file, uploadType, quality = 'hd') {
            if (!currentUser || !file) return null;

            const fileName = `${Date.now()}_${file.name}`;
            const formData = new FormData();
            formData.append('file', file);
            formData.append('upload_preset', CLOUDINARY_UPLOAD_PRESET);
            formData.append('tags', `${uploadType},${currentUser.uid}`);
            formData.append('folder', uploadType);

            try {
                return new Promise((resolve, reject) => {
                    const xhr = new XMLHttpRequest();

                    // Track progress
                    xhr.upload.addEventListener('progress', (e) => {
                        if (e.lengthComputable) {
                            const percentComplete = (e.loaded / e.total) * 100;
                            updateUploadStats(e.loaded, e.total);
                            updateStepProgress(3, `Uploading... ${Math.round(percentComplete)}%`, percentComplete);
                        }
                    });

                    xhr.addEventListener('load', () => {
                        if (xhr.status === 200) {
                            const data = JSON.parse(xhr.responseText);
                            resolve({
                                url: data.secure_url,
                                fileName: fileName,
                                publicId: data.public_id
                            });
                        } else {
                            reject(new Error(`Upload failed: ${xhr.status}`));
                        }
                    });

                    xhr.addEventListener('error', () => {
                        reject(new Error('Network error during upload'));
                    });

                    xhr.open('POST', CLOUDINARY_API_URL);
                    xhr.send(formData);
                });

            } catch (error) {
                console.error(`${uploadType} upload error:`, error);
                throw error;
            }
        }

        // ====== UI HELPERS ======
        function showPostUploadUI() {
            const uploadSection = document.getElementById('postUploadSection');
            if (uploadSection) {
                uploadSection.style.display = 'block';
            }
        }

        function showTweetUploadUI() {
            const uploadSection = document.getElementById('tweetUploadSection');
            if (uploadSection) {
                uploadSection.style.display = 'block';
            }
        }

        function setPostQuality(quality) {
            postVideoQuality = quality;
            document.querySelectorAll('.post-quality-btn').forEach(btn => {
                btn.classList.toggle('active', btn.dataset.quality === quality);
            });
        }

        // ====== UPLOAD PROGRESS TRACKER ======
        const uploadProgress = {
            startTime: 0,
            totalSize: 0,
            uploadedSize: 0,
            lastUpdate: 0,
            uploadSpeed: 0
        };

        function showUploadProgress() {
            const container = document.getElementById('uploadProgressContainer');
            container.classList.add('active');
            container.classList.remove('collapsed');
            resetUploadProgress();
        }

        function hideUploadProgress() {
            const container = document.getElementById('uploadProgressContainer');
            container.classList.remove('active');
        }

        function toggleUploadProgress() {
            const container = document.getElementById('uploadProgressContainer');
            container.classList.toggle('collapsed');
        }

        function resetUploadProgress() {
            uploadProgress.startTime = Date.now();
            uploadProgress.uploadedSize = 0;
            uploadProgress.lastUpdate = Date.now();
            uploadProgress.uploadSpeed = 0;

            // Reset all steps
            ['step1', 'step2', 'step3'].forEach(step => {
                document.getElementById(`${step}Icon`).className = 'step-icon pending';
                document.getElementById(`${step}Bar`).classList.remove('active');
                document.getElementById(`${step}Bar`).querySelector('.step-bar-fill').style.width = '0%';
            });

            document.getElementById('overallBarFill').style.width = '0%';
            document.getElementById('uploadElapsedTime').textContent = '0s';
            document.getElementById('uploadStats').textContent = '0 MB / 0 MB';
            document.getElementById('uploadSpeed').textContent = '0 MB/s';
        }

        function updateStepProgress(stepNum, label, progress, isActive = false) {
            const stepIcon = document.getElementById(`step${stepNum}Icon`);
            const stepProgress = document.getElementById(`step${stepNum}Progress`);
            const stepBar = document.getElementById(`step${stepNum}Bar`);
            const stepBarFill = stepBar.querySelector('.step-bar-fill');

            if (isActive) {
                stepIcon.className = 'step-icon active';
                stepBar.classList.add('active');
            }

            stepProgress.textContent = label;
            stepBarFill.style.width = progress + '%';

            if (progress === 100) {
                stepIcon.className = 'step-icon completed';
                stepIcon.innerHTML = 'âœ“';
            }
        }

        function updateUploadStats(uploadedBytes, totalBytes) {
            uploadProgress.uploadedSize = uploadedBytes;
            uploadProgress.totalSize = totalBytes;

            const now = Date.now();
            const timeDiff = (now - uploadProgress.lastUpdate) / 1000; // seconds
            const bytesDiff = uploadedBytes - (uploadProgress.uploadedSize - (uploadedBytes % 1000));

            if (timeDiff > 0) {
                uploadProgress.uploadSpeed = (bytesDiff / timeDiff) / (1024 * 1024); // MB/s
                uploadProgress.lastUpdate = now;
            }

            const elapsedSeconds = Math.floor((now - uploadProgress.startTime) / 1000);
            const uploadedMB = (uploadedBytes / (1024 * 1024)).toFixed(2);
            const totalMB = (totalBytes / (1024 * 1024)).toFixed(2);
            const percentComplete = Math.round((uploadedBytes / totalBytes) * 100);

            document.getElementById('uploadElapsedTime').textContent = elapsedSeconds + 's';
            document.getElementById('uploadStats').textContent = `${uploadedMB} MB / ${totalMB} MB`;
            document.getElementById('uploadSpeed').textContent = uploadProgress.uploadSpeed.toFixed(1) + ' MB/s';

            // Update overall progress
            const overallPercent = (percentComplete * 0.5) + 33; // Assume 33% for analyze + optimize
            document.getElementById('overallBarFill').style.width = overallPercent + '%';
        }

        // Handle Profile Icon Click
        function handleProfileClick() {
            if (currentUser) {
                openProfile();
            } else {
                openAuthModal();
            }
        }

        // Open Auth Modal
        function openAuthModal() {
            document.getElementById('authModal').classList.add('active');
        }

        // Close Auth Modal
        function closeAuthModal() {
            document.getElementById('authModal').classList.remove('active');
            document.getElementById('authError').style.display = 'none';
            document.getElementById('loginError').style.display = 'none';
        }

        // Switch to Login
        function switchToLogin() {
            document.getElementById('signupForm').style.display = 'none';
            document.getElementById('loginForm').style.display = 'block';
        }

        // Switch to Signup
        function switchToSignup() {
            document.getElementById('loginForm').style.display = 'none';
            document.getElementById('signupForm').style.display = 'block';
        }

        // Handle Signup
        async function handleSignup() {
            const name = document.getElementById('signupName').value.trim();
            const username = document.getElementById('signupUsername').value.trim();
            const email = document.getElementById('signupEmail').value.trim();
            const password = document.getElementById('signupPassword').value;

            if (!name || !username || !email || !password) {
                showError('authError', 'Please fill in all fields');
                return;
            }

            if (password.length < 6) {
                showError('authError', 'Password must be at least 6 characters');
                return;
            }

            try {
                // Create user
                const userCredential = await auth.createUserWithEmailAndPassword(email, password);
                const user = userCredential.user;

                // Save user profile to Firestore
                await db.collection('users').doc(user.uid).set({
                    name: name,
                    username: username,
                    email: email,
                    createdAt: firebase.firestore.FieldValue.serverTimestamp(),
                    followers: 0,
                    following: 0,
                    likes: 0,
                    views: 0,
                    earnings: 0
                });

                closeAuthModal();
                openProfile();
            } catch (error) {
                showError('authError', error.message);
            }
        }

        // Handle Login
        async function handleLogin() {
            const email = document.getElementById('loginEmail').value.trim();
            const password = document.getElementById('loginPassword').value;

            if (!email || !password) {
                showError('loginError', 'Please fill in all fields');
                return;
            }

            try {
                await auth.signInWithEmailAndPassword(email, password);
                closeAuthModal();
                openProfile();
            } catch (error) {
                showError('loginError', error.message);
            }
        }

        // Show Error
        function showError(elementId, message) {
            const errorEl = document.getElementById(elementId);
            errorEl.textContent = message;
            errorEl.style.display = 'block';
        }

        // Load User Profile
        async function loadUserProfile(uid) {
            try {
                const doc = await db.collection('users').doc(uid).get();
                if (doc.exists) {
                    const userData = doc.data();
                    document.getElementById('profileDisplayName').textContent = userData.name;
                    document.getElementById('profileUsernameDisplay').textContent = '@' + userData.username;
                    document.getElementById('profilePicLarge').textContent = userData.name.charAt(0).toUpperCase();
                }
            } catch (error) {
                console.error('Error loading profile:', error);
            }
        }

        // Open Profile
        function openProfile() {
            document.getElementById('profilePage').classList.add('active');
        }

        // Close Profile
        function closeProfile() {
            document.getElementById('profilePage').classList.remove('active');
        }

        // Logout
        async function logout() {
            if (confirm('Are you sure you want to logout?')) {
                await auth.signOut();
                closeProfile();
            }
        }

        // Switch Profile Tab
        function switchProfileTab(tabName) {
            // Update tab active state
            const tabs = document.querySelectorAll('.profile-tab');
            tabs.forEach(tab => tab.classList.remove('active'));
            event.target.classList.add('active');

            // Hide all tab content
            document.getElementById('feedTab').style.display = 'none';
            document.getElementById('exclusiveTab').style.display = 'none';
            document.getElementById('tweetsTab').style.display = 'none';

            // Show selected tab
            if (tabName === 'feed') {
                document.getElementById('feedTab').style.display = 'block';
            } else if (tabName === 'exclusive') {
                document.getElementById('exclusiveTab').style.display = 'block';
            } else if (tabName === 'tweets') {
                document.getElementById('tweetsTab').style.display = 'block';
            } else if (tabName === 'shorts' || tabName === 'liked') {
                document.getElementById('feedTab').style.display = 'block';
            }
        }

        // Original Video Feed Scripts
        const allTabs = document.querySelectorAll('.tabs span');
        allTabs.forEach(tab => {
            tab.addEventListener('click', () => {
                allTabs.forEach(t => t.classList.remove('active'));
                tab.classList.add('active');
            });
        });

        function setupVideoControls() {
            const posts = document.querySelectorAll('.video-post');

            posts.forEach(post => {
                const video = post.querySelector('video');
                const playPauseOverlay = post.querySelector('.play-pause-overlay');
                const playIcon = post.querySelector('.play-icon');
                const pauseIcon = post.querySelector('.pause-icon');

                post.addEventListener('click', (e) => {
                    if (e.target.closest('.sidebar') || e.target.closest('.follow-btn') || e.target.closest('.close-btn')) {
                        return;
                    }

                    if (video.paused) {
                        video.play();
                        playIcon.style.display = 'none';
                        pauseIcon.style.display = 'block';
                    } else {
                        video.pause();
                        playIcon.style.display = 'block';
                        pauseIcon.style.display = 'none';
                    }

                    playPauseOverlay.classList.add('show');
                    setTimeout(() => {
                        playPauseOverlay.classList.remove('show');
                    }, 500);
                });

                video.addEventListener('play', () => {
                    playIcon.style.display = 'none';
                    pauseIcon.style.display = 'block';
                });

                video.addEventListener('pause', () => {
                    playIcon.style.display = 'block';
                    pauseIcon.style.display = 'none';
                });
            });
        }

        const posts = document.querySelectorAll('.video-post video');
        function handleVideoPlay() {
            posts.forEach(video => {
                const rect = video.getBoundingClientRect();
                if (rect.top >= 0 && rect.bottom <= window.innerHeight) {
                    if (video.paused) {
                        video.play();
                    }
                } else {
                    if (!video.paused) {
                        video.pause();
                    }
                }
            });
        }

        document.querySelector('.video-feed').addEventListener('scroll', () => {
            clearTimeout(window.scrollTimeout);
            window.scrollTimeout = setTimeout(handleVideoPlay, 100);
        });
        handleVideoPlay();

        document.querySelectorAll('.close-btn').forEach(btn => {
            btn.addEventListener('click', (e) => {
                e.stopPropagation();
                const banner = btn.parentElement;
                const overlay = banner.closest('.overlay');
                const profileSection = overlay.querySelector('.profile-section');
                const adCaption = overlay.querySelector('.ad-caption');

                banner.classList.add('hidden');
                profileSection.classList.add('ad-closed');
                adCaption.classList.add('ad-closed');

                setTimeout(() => {
                    banner.style.display = 'none';
                }, 300);
            });
        });

        document.querySelectorAll('.follow-btn').forEach(btn => {
            btn.addEventListener('click', (e) => {
                e.stopPropagation();
                if (btn.textContent === 'FOLLOW') {
                    btn.textContent = 'FOLLOWING';
                    btn.style.background = 'rgba(255, 255, 255, 0.2)';
                    btn.style.border = '1px solid rgba(255, 255, 255, 0.5)';
                } else {
                    btn.textContent = 'FOLLOW';
                    btn.style.background = 'linear-gradient(45deg, #ff0050, #ff4081)';
                    btn.style.border = 'none';
                }
            });
        });

        setupVideoControls();

        document.querySelectorAll('.sidebar div').forEach(item => {
            item.addEventListener('click', (e) => {
                e.stopPropagation();
                item.style.transform = 'scale(1.1)';
                setTimeout(() => {
                    item.style.transform = 'scale(1)';
                }, 150);
            });
        });


        // Global variable to store profile picture
        let uploadedProfilePic = null;

        // Toast notification function for better UX
        function showToast(message, type = 'info') {
            // Remove existing toast
            const existingToast = document.getElementById('toast-notification');
            if (existingToast) {
                existingToast.remove();
            }

            const toast = document.createElement('div');
            toast.id = 'toast-notification';

            let bgColor = '#333';
            let borderColor = '#666';

            if (type === 'success') {
                bgColor = '#10b981';
                borderColor = '#059669';
            } else if (type === 'error') {
                bgColor = '#ef4444';
                borderColor = '#dc2626';
            }

            toast.style.cssText = `
    position: fixed;
    bottom: 20px;
    right: 20px;
    background: ${bgColor};
    color: white;
    padding: 15px 20px;
    border-radius: 8px;
    border-left: 4px solid ${borderColor};
    z-index: 9999;
    max-width: 300px;
    font-weight: 600;
    box-shadow: 0 4px 12px rgba(0,0,0,0.3);
    animation: slideInRight 0.3s ease;
  `;

            toast.textContent = message;
            document.body.appendChild(toast);

            // Add animation
            const style = document.createElement('style');
            if (!document.getElementById('toast-animation')) {
                style.id = 'toast-animation';
                style.textContent = `
      @keyframes slideInRight {
        from {
          transform: translateX(400px);
          opacity: 0;
        }
        to {
          transform: translateX(0);
          opacity: 1;
        }
      }
      @keyframes slideOutRight {
        from {
          transform: translateX(0);
          opacity: 1;
        }
        to {
          transform: translateX(400px);
          opacity: 0;
        }
      }
    `;
                document.head.appendChild(style);
            }

            // Auto remove after 4 seconds
            setTimeout(() => {
                toast.style.animation = 'slideOutRight 0.3s ease';
                setTimeout(() => {
                    toast.remove();
                }, 300);
            }, 4000);
        }

        // Update the profile icon when user logs in or profile picture changes
        function updateProfileIcon(profilePicUrl, userName) {
            const profileIcon = document.querySelector('.profile-icon');

            if (!profileIcon) return;

            if (profilePicUrl && profilePicUrl.trim()) {
                // If user has profile picture, show it
                const img = document.createElement('img');
                img.src = profilePicUrl;
                img.style.cssText = 'width: 100%; height: 100%; border-radius: 50%; object-fit: cover; display: block;';
                img.alt = 'profile';

                // Clear and add new image
                profileIcon.innerHTML = '';
                profileIcon.appendChild(img);

                console.log('Profile icon updated with image:', profilePicUrl);
            } else {
                // If no picture, show initial letter
                const initial = userName ? userName.charAt(0).toUpperCase() : 'U';
                profileIcon.innerHTML = `
      <div style="width: 100%; height: 100%; display: flex; align-items: center; justify-content: center; font-size: 18px; font-weight: bold; color: white;">
        ${initial}
      </div>
    `;

                console.log('Profile icon updated with initial:', initial);
            }
        }

        // Handle profile picture file selection
        document.getElementById('profilePicInput').addEventListener('change', async function (e) {
            const file = e.target.files[0];
            if (!file) return;

            // Show preview
            const reader = new FileReader();
            reader.onload = function (event) {
                const previewPic = document.getElementById('previewPic');
                previewPic.style.backgroundImage = `url(${event.target.result})`;
                previewPic.style.backgroundSize = 'cover';
                previewPic.style.backgroundPosition = 'center';
                previewPic.textContent = '';
            };
            reader.readAsDataURL(file);
        });

        // Open Settings Modal
        function openSettings() {
            if (!currentUser) {
                showToast('Please login first', 'error');
                return;
            }

            // Load current user data into form
            db.collection('users').doc(currentUser.uid).get().then(doc => {
                if (doc.exists) {
                    const data = doc.data();
                    document.getElementById('editName').value = data.name || '';
                    document.getElementById('editUsername').value = data.username || '';
                    document.getElementById('editBio').value = data.bio || '';
                    document.getElementById('editLocation').value = data.location || '';

                    // Show profile picture if exists
                    const previewPic = document.getElementById('previewPic');
                    if (data.profilePicUrl && data.profilePicUrl.trim()) {
                        previewPic.style.backgroundImage = `url(${data.profilePicUrl})`;
                        previewPic.style.backgroundSize = 'cover';
                        previewPic.style.backgroundPosition = 'center';
                        previewPic.style.backgroundColor = 'transparent';
                        previewPic.textContent = '';
                    } else {
                        previewPic.style.backgroundImage = 'none';
                        previewPic.style.backgroundColor = '#333';
                        previewPic.textContent = (data.name || 'U').charAt(0).toUpperCase();
                    }
                } else {
                    showToast('Profile not found', 'error');
                }
            }).catch(error => {
                console.error('Error loading profile:', error);
                showToast('Error loading profile', 'error');
            });

            document.getElementById('settingsModal').classList.add('active');
        }

        // Close Settings Modal
        function closeSettings() {
            document.getElementById('settingsModal').classList.remove('active');
            document.getElementById('settingsError').style.display = 'none';
        }

        // Save Profile Changes - Base64 Image Version
        async function saveProfile() {
            if (!currentUser) {
                showToast('Please login first', 'error');
                return;
            }

            const btn = event.target;
            const originalText = btn.textContent;
            btn.textContent = 'Saving...';
            btn.disabled = true;

            try {
                const userData = {
                    name: document.getElementById('editName').value.trim(),
                    username: document.getElementById('editUsername').value.trim(),
                    bio: document.getElementById('editBio').value.trim(),
                    location: document.getElementById('editLocation').value.trim(),
                    updatedAt: firebase.firestore.FieldValue.serverTimestamp()
                };

                // Handle profile picture if selected
                const picInput = document.getElementById('profilePicInput');
                if (picInput.files && picInput.files[0]) {
                    btn.textContent = 'Processing image...';
                    const file = picInput.files[0];

                    // Convert image to base64
                    const base64String = await new Promise((resolve, reject) => {
                        const reader = new FileReader();
                        reader.onload = () => resolve(reader.result);
                        reader.onerror = reject;
                        reader.readAsDataURL(file);
                    });

                    userData.profilePicUrl = base64String;

                    // Update profile picture in UI immediately
                    document.getElementById('profilePicLarge').style.backgroundImage = `url(${base64String})`;
                    document.getElementById('profilePicLarge').style.backgroundSize = 'cover';
                    document.getElementById('profilePicLarge').style.backgroundPosition = 'center';
                    document.getElementById('profilePicLarge').textContent = '';

                    // Update profile icon
                    updateProfileIcon(base64String, userData.name);
                }

                // Update display name and username in profile
                document.getElementById('profileDisplayName').textContent = userData.name;
                document.getElementById('profileUsernameDisplay').textContent = '@' + userData.username;

                // Update bio display
                const bioDiv = document.querySelector('.profile-bio');
                if (bioDiv) {
                    bioDiv.innerHTML = `${userData.bio}<br>ðŸ“ ${userData.location}`;
                }

                btn.textContent = 'Saving...';

                // Save to Firestore (use set with merge to create if doesn't exist)
                await db.collection('users').doc(currentUser.uid).set(userData, { merge: true });

                showToast('âœ… Profile updated successfully!', 'success');

                // Clear file input
                picInput.value = '';

                setTimeout(() => {
                    closeSettings();
                }, 1500);

            } catch (error) {
                console.error('Error saving profile:', error);
                showToast('Error: ' + error.message, 'error');
                showError('settingsError', 'Error saving profile: ' + error.message);
            } finally {
                btn.textContent = originalText;
                btn.disabled = false;
            }
        }

        // REPLACE your existing loadUserProfile function with this:
        async function loadUserProfile(uid) {
            try {
                const doc = await db.collection('users').doc(uid).get();
                if (doc.exists) {
                    const userData = doc.data();

                    // Update profile page
                    document.getElementById('profileDisplayName').textContent = userData.name;
                    document.getElementById('profileUsernameDisplay').textContent = '@' + userData.username;

                    // Update profile icon at top
                    updateProfileIcon(userData.profilePicUrl, userData.name);

                    // Load profile picture on profile page
                    const profilePicLarge = document.getElementById('profilePicLarge');
                    if (userData.profilePicUrl) {
                        profilePicLarge.style.backgroundImage = `url(${userData.profilePicUrl})`;
                        profilePicLarge.style.backgroundSize = 'cover';
                        profilePicLarge.style.backgroundPosition = 'center';
                        profilePicLarge.textContent = '';
                    } else {
                        profilePicLarge.style.backgroundImage = 'none';
                        profilePicLarge.textContent = userData.name.charAt(0).toUpperCase();
                    }

                    // Load bio and location
                    const bioDiv = document.querySelector('.profile-bio');
                    if (bioDiv) {
                        bioDiv.innerHTML = `${userData.bio || 'African Creator | Exclusive Content ðŸ”¥'}<br>ðŸ“ ${userData.location || 'Lagos, Nigeria'}`;
                    }
                }
            } catch (error) {
                console.error('Error loading profile:', error);
            }
        }

        // REPLACE your existing auth.onAuthStateChanged with this:
        auth.onAuthStateChanged((user) => {
            if (user) {
                currentUser = user;
                loadUserProfile(user.uid);
            } else {
                currentUser = null;
                // Reset profile icon to default when logged out
                const profileIcon = document.querySelector('.profile-icon');
                profileIcon.innerHTML = `
      <svg width="22" height="22" viewBox="0 0 24 24" fill="white">
        <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
      </svg>
    `;
            }
        });
        // Tab Switching Function
        function switchMainTab(tabName) {
            // Remove active class from all tabs
            const allTabs = document.querySelectorAll('.tabs .tab');
            allTabs.forEach(tab => tab.classList.remove('active'));

            // Add active class to clicked tab
            event.target.classList.add('active');

            // Hide all tab contents
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
                content.style.display = 'none';
            });

            // Show selected tab content
            const selectedTab = document.getElementById(tabName);
            if (selectedTab) {
                selectedTab.classList.add('active');
                selectedTab.style.display = 'block';
            }

            // Pause all videos when switching tabs
            document.querySelectorAll('video').forEach(video => {
                video.pause();
            });

            // If switching to video feed, restart video playback logic
            if (tabName === 'busTab') {
                setTimeout(handleVideoPlay, 300);
            }
        }

        // Initialize Tab Click Listeners
        document.addEventListener('DOMContentLoaded', function () {
            const tabs = document.querySelectorAll('.tabs .tab');
            tabs.forEach((tab, index) => {
                tab.addEventListener('click', function () {
                    if (index === 0) switchMainTab('busTab');      // Bus = Video Feed
                    if (index === 1) switchMainTab('friendTab');   // Friend = Tweet Feed
                    if (index === 2) switchMainTab('poseTab');     // Pose = Video Grid
                    if (index === 3) switchMainTab('busTab');      // fyp = Video Feed (for now)
                });
            });
        });

        // Updated Tab Switching Function with Scroll Reset
        function switchMainTab(tabName) {
            // Remove active class from all tabs
            const allTabs = document.querySelectorAll('.tabs .tab');
            allTabs.forEach(tab => tab.classList.remove('active'));

            // Add active class to clicked tab
            event.target.classList.add('active');

            // Hide all tab contents
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
                content.style.display = 'none';
            });

            // Show selected tab content
            const selectedTab = document.getElementById(tabName);
            if (selectedTab) {
                selectedTab.classList.add('active');
                selectedTab.style.display = 'block';

                // Scroll to top of the new tab
                selectedTab.scrollTop = 0;
            }

            // Pause all videos when switching tabs
            document.querySelectorAll('video').forEach(video => {
                video.pause();
            });

            // If switching to video feed, restart video playback logic
            if (tabName === 'busTab') {
                setTimeout(handleVideoPlay, 300);
            }
        }

        // Add smooth scroll behavior to load more buttons
        document.addEventListener('DOMContentLoaded', function () {
            // Tab switching
            const tabs = document.querySelectorAll('.tabs .tab');
            tabs.forEach((tab, index) => {
                tab.addEventListener('click', function () {
                    if (index === 0) switchMainTab('busTab');      // Bus = Video Feed
                    if (index === 1) switchMainTab('friendTab');   // Friend = Tweet Feed
                    if (index === 2) switchMainTab('poseTab');     // Pose = Video Grid
                    if (index === 3) switchMainTab('busTab');      // fyp = Video Feed
                });
            });

            // Load more button scroll effect
            document.querySelectorAll('.load-more-btn').forEach(btn => {
                btn.addEventListener('click', function () {
                    // Add loading animation or fetch more content here
                    this.textContent = 'Loading... â³';
                    setTimeout(() => {
                        this.textContent = this.closest('#poseTab') ? 'Load More Videos ðŸ”½' : 'Show More Posts ðŸ”½';
                    }, 1000);
                });
            });
        });


        // Check if user is new and show welcome popup
        function checkAndShowWelcomePopup() {
            // Check if user has visited before
            const hasVisited = localStorage.getItem('poseVisited');

            // Check if user is logged in
            if (!currentUser && !hasVisited) {
                document.getElementById('welcomePopup').classList.remove('hidden');
            }
        }

        // Close welcome popup
        function closeWelcomePopup() {
            document.getElementById('welcomePopup').classList.add('hidden');
            localStorage.setItem('poseVisited', 'true');
        }

        // Open signup from welcome popup
        function openSignupFromWelcome() {
            closeWelcomePopup();
            // Switch to signup form
            document.getElementById('signupForm').style.display = 'block';
            document.getElementById('loginForm').style.display = 'none';
            openAuthModal();
        }

        // Open login from welcome popup
        function openLoginFromWelcome() {
            closeWelcomePopup();
            // Switch to login form
            document.getElementById('loginForm').style.display = 'block';
            document.getElementById('signupForm').style.display = 'none';
            openAuthModal();
        }

        // Update auth.onAuthStateChanged to check welcome popup
        auth.onAuthStateChanged((user) => {
            if (user) {
                currentUser = user;
                loadUserProfile(user.uid);
                // Close welcome popup if user logs in
                closeWelcomePopup();
            } else {
                currentUser = null;
                // Reset profile icon to default when logged out
                const profileIcon = document.querySelector('.profile-icon');
                profileIcon.innerHTML = `
      <svg width="22" height="22" viewBox="0 0 24 24" fill="white">
        <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
      </svg>
    `;
            }
        });

        // Call this when page loads (add to your DOMContentLoaded)
        document.addEventListener('DOMContentLoaded', function () {
            // Existing code...

            // Show welcome popup after short delay
            setTimeout(checkAndShowWelcomePopup, 500);
        });


        // Open Upload Page
        function openUploadPage() {
            document.getElementById('uploadPage').classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        // Close Upload Page
        function closeUploadPage() {
            document.getElementById('uploadPage').classList.remove('active');
            document.body.style.overflow = 'auto';
        }

        // Switch Upload Tabs
        function switchUploadTab(tabName) {
            // Remove active from all tabs
            document.querySelectorAll('.upload-tab').forEach(tab => {
                tab.classList.remove('active');
            });

            // Add active to clicked tab
            event.target.classList.add('active');

            // Hide all tab contents
            document.querySelectorAll('.tab-content-upload').forEach(content => {
                content.classList.remove('active');
            });

            // Show selected tab
            if (tabName === 'tweet') {
                document.getElementById('tweetTab').classList.add('active');
            } else if (tabName === 'post') {
                document.getElementById('postTab').classList.add('active');
            } else if (tabName === 'exclusive') {
                document.getElementById('exclusiveTab').classList.add('active');
            }
        }

        // Preview Media Function
        function previewMedia(inputId, previewId) {
            const input = document.getElementById(inputId);
            const preview = document.getElementById(previewId);

            input.addEventListener('change', function (e) {
                const file = e.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = function (e) {
                        if (file.type.startsWith('image/')) {
                            preview.innerHTML = `<img src="${e.target.result}" alt="preview">`;
                        } else if (file.type.startsWith('video/')) {
                            preview.innerHTML = `<video src="${e.target.result}" controls></video>`;
                        }
                    };
                    reader.readAsDataURL(file);
                }
            });
        }

        // Initialize media previews
        document.addEventListener('DOMContentLoaded', function () {
            previewMedia('tweetMedia', 'tweetMediaPreview');
            previewMedia('postVideo', 'postVideoPreview');
            previewMedia('postThumbnail', 'postThumbnailPreview');
            previewMedia('exclusiveVideo', 'exclusiveVideoPreview');
        });

        // Open Tweet Preview
        function openTweetPreview() {
            const text = document.getElementById('tweetText').value.trim();

            if (!text) {
                alert('Please enter some text for your tweet');
                return;
            }

            // Copy media preview to popup
            const mediaPreview = document.getElementById('tweetMediaPreview').innerHTML;
            document.getElementById('tweetPreviewMedia').innerHTML = mediaPreview;

            document.getElementById('tweetPreviewPopup').classList.add('active');
        }

        // Close Tweet Preview
        function closeTweetPreview() {
            document.getElementById('tweetPreviewPopup').classList.remove('active');
        }

        // Open Exclusive Preview
        function openExclusivePreview() {
            const videoInput = document.getElementById('exclusiveVideo');

            if (!videoInput.files || videoInput.files.length === 0) {
                alert('Please upload or record a video');
                return;
            }

            // Copy video preview to popup
            const videoPreview = document.getElementById('exclusiveVideoPreview').innerHTML;
            document.getElementById('exclusivePreviewVideo').innerHTML = videoPreview;

            document.getElementById('exclusivePreviewPopup').classList.add('active');
        }

        // Close Exclusive Preview
        function closeExclusivePreview() {
            document.getElementById('exclusivePreviewPopup').classList.remove('active');
        }

        // Post Tweet to Firebase - with Cloudinary
        window.postTweet = async function postTweet() {
            console.log('ðŸš€ postTweet called');
            if (!currentUser) {
                alert('âŒ Please login to post');
                console.error('Not logged in');
                return;
            }

            const text = document.getElementById('tweetText').value.trim();
            console.log('Tweet text:', text);

            if (!text) {
                alert('âš ï¸ Please enter some text for your tweet');
                return;
            }

            try {
                console.log('Getting user profile...');
                const userDoc = await db.collection('users').doc(currentUser.uid).get();
                const userData = userDoc.data();

                if (!userData) {
                    alert('User profile not found. Please complete your profile first.');
                    return;
                }

                // Use Cloudinary media URL (if any media was selected)
                let mediaUrl = tweetMediaUrl; // This will be null if no media was uploaded

                // Save to Firestore
                const docRef = await db.collection('tweets').add({
                    userId: currentUser.uid,
                    userName: userData.name || '',
                    username: userData.username || '',
                    userProfilePic: userData.profilePicUrl || null,
                    text: text,
                    caption: document.getElementById('tweetCaption').value.trim(),
                    hashtags: document.getElementById('tweetHashtags').value.trim(),
                    mediaUrl: mediaUrl,
                    allowAds: document.getElementById('tweetAllowAds').checked,
                    allowComments: document.getElementById('tweetAllowComments').checked,
                    allowSave: document.getElementById('tweetAllowSave').checked,
                    likes: 0,
                    comments: 0,
                    shares: 0,
                    createdAt: firebase.firestore.FieldValue.serverTimestamp()
                });

                console.log('Tweet saved with ID:', docRef.id);
                alert('âœ… Tweet posted successfully!');
                closeTweetPreview();
                closeUploadPage();

                // Clear form
                document.getElementById('tweetText').value = '';
                document.getElementById('tweetCaption').value = '';
                document.getElementById('tweetHashtags').value = '';
                document.getElementById('tweetMedia').value = '';
                document.getElementById('tweetMediaPreview').innerHTML = '';
                document.getElementById('tweetPreviewMedia').innerHTML = '';
                document.getElementById('tweetUploadStatus').innerHTML = '';

                // Reset media variables
                tweetMediaUrl = null;
                tweetMediaFileName = null;

            } catch (error) {
                console.error('Error posting tweet:', error);
                alert('âŒ Failed to post tweet: ' + error.message);
            }
        }

        // Post Exclusive to Firebase - Optimized for Spark Mode
        window.postExclusive = async function postExclusive() {
            console.log('ðŸš€ postExclusive called');
            if (!currentUser) {
                alert('âŒ Please login to post');
                console.error('Not logged in');
                return;
            }

            // Check if video URL exists (auto-uploaded)
            if (!exclusiveVideoUrl) {
                alert('âš ï¸ Please wait for video upload to complete');
                console.warn('Video not uploaded yet');
                return;
            }

            try {
                console.log('â³ Getting user profile...');
                const userDoc = await db.collection('users').doc(currentUser.uid).get();
                const userData = userDoc.data();

                if (!userData) {
                    alert('User profile not found. Please complete your profile first.');
                    return;
                }

                // Use pre-uploaded video URL
                const videoUrl = exclusiveVideoUrl;

                // Save to Firestore - minimal fields for Spark mode
                const docRef = await db.collection('exclusive').add({
                    userId: currentUser.uid,
                    userName: userData.name || '',
                    username: userData.username || '',
                    userProfilePic: userData.profilePicUrl || null,
                    caption: document.getElementById('exclusiveCaption').value.trim(),
                    hashtags: document.getElementById('exclusiveHashtags').value.trim(),
                    videoUrl: videoUrl,
                    videoFileName: exclusiveVideoFileName,
                    allowAds: document.getElementById('exclusiveAllowAds').checked,
                    allowComments: document.getElementById('exclusiveAllowComments').checked,
                    allowSave: document.getElementById('exclusiveAllowSave').checked,
                    views: 0,
                    likes: 0,
                    comments: 0,
                    earnings: 0,
                    createdAt: firebase.firestore.FieldValue.serverTimestamp()
                });

                console.log('Exclusive saved with ID:', docRef.id);

                alert('âœ… Exclusive video posted successfully!');
                closeExclusivePreview();
                closeUploadPage();

                // Clear form
                document.getElementById('exclusiveVideo').value = '';
                document.getElementById('exclusiveVideoPreview').innerHTML = '';
                document.getElementById('exclusiveUploadStatus').innerHTML = '';

                // Reset video variables
                exclusiveVideoUrl = null;
                exclusiveVideoFileName = null;

            } catch (error) {
                console.error('Error posting exclusive:', error);
                alert('âŒ Failed to post exclusive: ' + error.message);
            }
        };

        // Debug logging function
        function addDebugLog(message) {
            const debugLog = document.getElementById('debugLog');
            const timestamp = new Date().toLocaleTimeString();
            const logEntry = document.createElement('div');
            logEntry.textContent = `[${timestamp}] ${message}`;
            debugLog.appendChild(logEntry);
            debugLog.scrollTop = debugLog.scrollHeight;
            console.log(message);
        }

        function toggleDebug() {
            const panel = document.getElementById('debugPanel');
            panel.style.display = panel.style.display === 'none' ? 'block' : 'none';
        }

        function clearDebugLog() {
            document.getElementById('debugLog').innerHTML = '';
        }

        // Upload Post - Optimized with Cloudinary
        window.uploadPost = async function uploadPost() {
            clearDebugLog();
            addDebugLog('ðŸš€ uploadPost started');

            if (!currentUser) {
                addDebugLog('âŒ User not logged in');
                alert('âŒ Please login first');
                return;
            }

            try {
                const titleInput = document.getElementById('postTitle');
                const descInput = document.getElementById('postDescription');
                const tagsInput = document.getElementById('postTags');
                const priceInput = document.getElementById('postPrice');
                const freeCheckbox = document.getElementById('postFree');
                const thumbInput = document.getElementById('postThumbnail');

                addDebugLog('ðŸ“‹ Form elements found');

                // Check if video URL exists (from Cloudinary)
                if (!postVideoUrl) {
                    addDebugLog('âŒ Video not uploaded yet');
                    alert('âš ï¸ Please wait for video upload to complete');
                    return;
                }

                const title = titleInput.value.trim();
                if (!title) {
                    addDebugLog('âŒ Title is empty');
                    alert('âš ï¸ Please enter a title for your post');
                    return;
                }

                addDebugLog(`ðŸ“¹ Using Cloudinary video URL`);

                // Get user data
                addDebugLog('ðŸ“– Reading user data...');
                const userDoc = await db.collection('users').doc(currentUser.uid).get();
                const userData = userDoc.data();

                if (!userData) {
                    addDebugLog('âŒ User profile not found');
                    alert('User profile not found. Please complete your profile first.');
                    return;
                }
                addDebugLog('âœ… User data loaded');

                // Upload thumbnail to Cloudinary if provided
                let thumbnailUrl = null;
                if (thumbInput.files && thumbInput.files[0]) {
                    addDebugLog('ðŸ–¼ï¸ Uploading thumbnail to Cloudinary...');
                    try {
                        const thumbResult = await uploadToCloudinary(thumbInput.files[0], 'post_thumbnail');
                        thumbnailUrl = thumbResult.url;
                        addDebugLog('âœ… Thumbnail uploaded');
                    } catch (thumbError) {
                        addDebugLog(`âš ï¸ Thumbnail upload failed, continuing without thumbnail`);
                    }
                }

                // Prepare post data with Cloudinary URLs
                const postData = {
                    userId: currentUser.uid,
                    userName: userData.name || '',
                    username: userData.username || '',
                    userProfilePic: userData.profilePicUrl || null,
                    title: title,
                    description: descInput.value.trim(),
                    tags: tagsInput.value.trim(),
                    videoUrl: postVideoUrl,
                    thumbnailUrl: thumbnailUrl,
                    price: freeCheckbox.checked ? 0 : parseFloat(priceInput.value) || 0,
                    isFree: freeCheckbox.checked,
                    views: 0,
                    likes: 0,
                    comments: 0,
                    earnings: 0,
                    createdAt: firebase.firestore.FieldValue.serverTimestamp()
                };

                // Save to Firestore
                addDebugLog('ðŸ’¾ Saving to Firestore...');

                try {
                    const docRef = await db.collection('posts').add(postData);
                    const postId = docRef.id;
                    addDebugLog(`âœ… Post saved! ID: ${postId}`);
                } catch (firestoreError) {
                    addDebugLog(`âŒ Firestore error: ${firestoreError.message}`);
                    alert('âŒ Failed to save post: ' + firestoreError.message);
                    return;
                }

                alert('âœ… Video posted successfully!');
                addDebugLog('ðŸŽ‰ Upload complete!');

                // Clear form
                document.getElementById('postVideo').value = '';
                titleInput.value = '';
                descInput.value = '';
                tagsInput.value = '';
                priceInput.value = '';
                freeCheckbox.checked = false;
                thumbInput.value = '';
                document.getElementById('postVideoPreview').innerHTML = '';
                document.getElementById('postThumbnailPreview').innerHTML = '';
                document.getElementById('postUploadStatus').innerHTML = '';

                // Reset variables
                postVideoUrl = null;
                postVideoFileName = null;

                closeUploadPage();

            } catch (error) {
                addDebugLog(`âŒ Error: ${error.message}`);
                alert('âŒ Error: ' + error.message);
            }
        };

    </script>
</body>

</html>
